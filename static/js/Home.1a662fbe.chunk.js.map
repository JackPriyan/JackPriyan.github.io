{"version":3,"sources":["components/footer.js","utils/hooks.js","components/tooltips.js","components/level.js","components/minigraph.js","components/maplegend.js","components/choropleth.js","components/mapexplorer.js","components/timeseries.js","components/timeseriesexplorer.js","../node_modules/react-feather/dist/icons/external-link.js","../node_modules/react-feather/dist/icons/phone.js","../node_modules/react-feather/dist/icons/search.js","../node_modules/react-feather/dist/icons/x.js","../node_modules/react-use/esm/useDebounce.js","../node_modules/react-use/esm/useTimeoutFn.js","components/search.js","../node_modules/react-feather/dist/icons/chevron-down.js","../node_modules/react-use/esm/createBreakpoint.js","components/row.js","components/table.js","components/updates.js","../node_modules/react-feather/dist/icons/bell.js","../node_modules/react-feather/dist/icons/bell-off.js","components/home.js"],"names":["React","memo","props","t","useTranslation","className","style","animationDelay","href","target","rel","justifyContent","useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","entries","observer","forEach","entry","index","contentRect","observe","unobserve","testedToolTip","onClick","e","stopPropagation","data-for","data-tip","data-event","data-event-off","id","place","type","effect","multiline","scrollHide","globalEventOff","data","setData","useEffectOnce","active","confirmed","recovered","deaths","deltaconfirmed","deltadeaths","deltarecovered","isNaN","formatNumber","timeseries","timeSeriesData","setTimeSeriesData","svgRef1","useRef","svgRef2","svgRef3","svgRef4","slice","length","graphData","useCallback","margin","chartRight","chartBottom","svg1","d3","svg2","svg3","svg4","d","dailyconfirmed","dailyrecovered","dailydeceased","xScale","domain","date","range","svgArray","dataTypes","colors","dailyMin","dailyactive","dailyMax","Math","max","domainMinMax","yScale","svg","i","color","path","append","datum","attr","x","y","curve","totalLength","node","getTotalLength","transition","delay","duration","selectAll","enter","on","width","height","viewBox","preserveAspectRatio","MapLegend","mapScale","statistic","mapStatistic","mapOption","svgRef","wrapperRef","getBoundingClientRect","MAP_STATISTICS","ZONE","call","legend","tickValues","marginLeft","marginRight","ordinalWeights","Object","values","HOTSPOTS","select","remove","maxRadius","join","text","title","capitalizeAll","PER_MILLION","ticks","tickFormat","n","TOTAL","Number","isInteger","position","tickSize","marginTop","marginBottom","tickAdjust","g","interpolate","min","copy","rangeRound","ramp","toDataURL","interpolator","assign","undefined","round","map","invertExtent","thresholds","quantiles","thresholdFormat","widthScale","reduce","a","b","xPos","w","acc","bandwidth","canvas","context","getContext","fillStyle","fillRect","caseColor","caseType","alpha","ChoroplethMap","mapData","currentMap","changeMap","regionHighlighted","setRegionHighlighted","isCountryLoaded","mapMeta","MAP_META","name","geoDataResponse","useSWR","geoDataFile","file","useMemo","stat","clamp","colorInterpolator","geoData","topology","topojson","objects","graphObjectStates","graphObjectDistricts","widthDefault","heightDefault","projection","fitWidth","fitSize","bBox","bounds","split","features","view","MAP_VIEWS","STATES","f","district","properties","state","st_nm","obj","onceTouchedRegion","regionSelection","sel","region","mapType","MAP_TYPES","STATE","this","parseFloat","total","toFixed","toString","circlesData","value","Unknown","sort","centroid","meshStates","COUNTRY","meshDistricts","DISTRICTS","highlightRegionInMap","each","highlighted","parentNode","appendChild","Fragment","colorInterpolationFilters","getRegionFromState","mapName","states","districts","zones","stateTestData","anchor","setAnchor","setMapOption","setCurrentMap","currentMapMeta","currentMapData","dtype","keys","acc1","acc2","zone","typeCount","parseInt","STATE_POPULATIONS","districtWiseData","districtData","Total","find","getRegionFromDistrict","hoveredRegion","panelRegion","hoveredRegionCount","hoveredRegionZone","switchMapToState","newMapMeta","topDistrict","filter","ReactDOM","unstable_batchedUpdates","testObj","display","window","innerWidth","action","totaltested","parse","updatedon","Date","formatDayMonth","source","lastupdatedtime","formatDate","formatLastUpdated","to","STATE_CODES_REVERSE","prevProps","currProps","equal","timeseriesProp","chartType","mode","logMode","stateCode","Infinity","lastDaysCount","setLastDaysCount","setTimeseries","datapoint","setDatapoint","setIndex","moving","setMoving","svgRef5","transformTimeSeries","slicedTimeseries","sliceTimeseriesFromEnd","T","yScales","svg5","dateMin","subDays","dateMax","addDays","numTicksX","xAxis","tick","formatTimeseriesTickX","xAxis2","yAxis","tickPadding","plotTotal","dataTypesTotal","dataTypesDaily","uniformScaleMin","totalactive","totalrecovered","totaldeceased","uniformScaleMax","totalconfirmed","yScaleUniformLinear","nice","yScaleUniformLog","yScaleLinear","yScaleLog","yScaleDailyUniform","focus","mousemove","xm","invert","bisectDate","left","j","mouseout","typeTotal","typeDaily","filteredTimeseries","reverse","p","getPointAtLength","repeat","dateStr","formatTimeseriesDate","chartKey1","chartKey2","chartKey3","chartKey4","chartKey5","currentStatusCount","currentDiff","formatedDiff","aria-label","isIntersecting","activeStateCode","onHighlightState","useLocalStorage","setChartType","isTimeseriesIntersecting","setIsTimeseriesIntersecting","timeseriesMode","setTimeseriesMode","timeseriesLogMode","setTimeseriesLogMode","options","rootMargin","onChange","htmlFor","checked","event","disabled","selectedState","selectedOptions","getAttribute","JSON","s","statecode","key","statedata","stringify","_extends","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","ExternalLink","forwardRef","_ref","_ref$color","_ref$size","size","rest","createElement","xmlns","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","x1","y1","x2","y2","propTypes","PropTypes","string","oneOfType","number","displayName","Phone","Search","cx","cy","r","X","useDebounce","fn","ms","deps","_a","ready","timeout","callback","isReady","set","clearTimeout","setTimeout","clear","useTimeoutFn","cancel","reset","engine","Bloodhound","initialize","local","STATE_CODES_ARRAY","queryTokenizer","tokenizers","whitespace","datumTokenizer","districtEngine","limit","indexRemote","remote","url","transform","response","stateName","districtName","push","essentialsEngine","resources","districtZones","searchValue","setSearchValue","expand","setExpand","results","setResults","searchInput","handleSearch","search","datums","result","stateObj","route","code","districtObj","essentialsObj","nameoftheorganisation","category","website","contact","description","descriptionandorserviceprovided","city","phonenumber","setNativeValue","element","valueSetter","getOwnPropertyDescriptor","getPrototypeOf","prototypeValueSetter","onFocus","onBlur","STATE_CODES","classnames","toLowerCase","match","onMouseDown","preventDefault","dispatchEvent","Event","bubbles","ChevronDown","createBreakpoint","breakpoints","laptopL","laptop","tablet","screen","setScreen","setSideScreen","addEventListener","removeEventListener","sortedBreakpoints","useBreakpoint","XL","L","S","StateCell","ArrowUp","DistrictHeaderCell","handleSort","sortData","breakpoint","capitalize","abbreviate","sortColumn","isAscending","DistrictCell","delta","DistrictRow","onHighlightDistrict","sortedDistricts","onMouseEnter","notes","DISTRICT_ROW_STATISTICS","setSortedDistricts","showDistricts","setShowDistricts","setSortData","history","useHistory","Chevron","rotateRightDown","rotateDownRight","_onHighlightState","doSort","sorted","district1","district2","localeCompare","newSortData","statenotes","STATE_ROW_STATISTICS","colSpan","paddingBottom","align","StateHeaderCell","sortedStates","setSortedStates","FineprintTop","FineprintBottom","newSortedStates","newDate","currentDate","Updates","updates","setUpdates","axios","get","then","catch","err","console","log","useLayoutEffect","format","activity","update","replace","activityDate","timestamp","getDate","formatDistance","dangerouslySetInnerHTML","__html","Bell","BellOff","Home","setStates","stateDistrictWiseData","setStateDistrictWiseData","setDistrictZones","setStateTestData","lastUpdated","setLastUpdated","fetched","setFetched","showUpdates","setShowUpdates","lastViewedLog","setLastViewedLog","newUpdate","setNewUpdate","getStates","lastTimestamp","Promise","all","statesDailyResponse","zonesResponse","stateDistrictWiseResponse","statewise","parseDistrictZones","ts","parseStateTimeseries","preprocessTimeseries","cases_time_series","testTs","parseStateTestTimeseries","states_tested_data","parseTotalTestTimeseries","tested","tsMerged","mergeTimeseries","testData","parseStateTestData","totalTest","totalsamplestested","updatetimestamp","Helmet","content","formatDateAbsolute","summary"],"mappings":"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","file":"static/js/Home.1a662fbe.chunk.js","sourcesContent":["import React from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nfunction Footer(props) {\r\n  const {t} = useTranslation();\r\n\r\n  return (\r\n    <footer className=\"fadeInUp\" style={{animationDelay: '2s'}}>\r\n      <h5>{t('We stand with everyone fighting on the frontlines')}</h5>\r\n\r\n      <div className=\"link\">\r\n        <a\r\n          href=\"https://github.com/covid19india\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          covid19india\r\n        </a>\r\n      </div>\r\n\r\n      <a\r\n        href=\"https://github.com/covid19india/covid19india-react\"\r\n        className=\"button github\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        <Icon.GitHub />\r\n        <span>{t('Open Sourced on GitHub')}</span>\r\n      </a>\r\n\r\n      <a\r\n        className=\"button excel\"\r\n        href=\"http://patientdb.covid19india.org\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        <Icon.Database />\r\n        <span>{t('Crowdsourced Patient Database')}</span>\r\n      </a>\r\n\r\n      <a\r\n        href=\"https://twitter.com/covid19indiaorg\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        className=\"button twitter\"\r\n        style={{justifyContent: 'center'}}\r\n      >\r\n        <Icon.Twitter />\r\n        <span>{t('View updates on Twitter')}</span>\r\n      </a>\r\n\r\n      <a\r\n        href=\"https://bit.ly/covid19crowd\"\r\n        className=\"button telegram\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        <Icon.MessageCircle />\r\n        <span>{t('Join Telegram to Collaborate!')}</span>\r\n      </a>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default React.memo(Footer);\r\n","import {ResizeObserver} from '@juggle/resize-observer';\r\nimport {useState, useEffect} from 'react';\r\n\r\nexport const useResizeObserver = (ref) => {\r\n  const [dimensions, setDimensions] = useState(null);\r\n  useEffect(() => {\r\n    const observeTarget = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries, observer) => {\r\n      entries.forEach((entry, index) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(observeTarget);\r\n    return () => {\r\n      resizeObserver.unobserve(observeTarget);\r\n    };\r\n  }, [ref]);\r\n  return dimensions;\r\n};\r\n","import React from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nexport const testedToolTip = (\r\n  <span className=\"tooltip-tested\" onClick={(e) => e.stopPropagation()}>\r\n    <Icon.Info\r\n      data-for=\"tested\"\r\n      data-tip=\"Reporting total samples tested from ICMR data\"\r\n      data-event=\"touchstart mouseover\"\r\n      data-event-off=\"mouseleave\"\r\n    />\r\n    <ReactTooltip\r\n      id=\"tested\"\r\n      place=\"top\"\r\n      type=\"dark\"\r\n      effect=\"solid\"\r\n      multiline={true}\r\n      scrollHide={true}\r\n      globalEventOff=\"click\"\r\n    />\r\n  </span>\r\n);\r\n","import {formatNumber} from '../utils/commonfunctions';\r\n\r\nimport React, {useState} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useEffectOnce} from 'react-use';\r\n\r\nfunction Level(props) {\r\n  const [data, setData] = useState(props.data);\r\n  const {t} = useTranslation();\r\n\r\n  useEffectOnce(() => {\r\n    setData({\r\n      active: +props.data.active,\r\n      confirmed: +props.data.confirmed,\r\n      recovered: +props.data.recovered,\r\n      deaths: +props.data.deaths,\r\n      deltaconfirmed: +props.data.deltaconfirmed,\r\n      deltadeaths: +props.data.deltadeaths,\r\n      deltarecovered: +props.data.deltarecovered,\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div className=\"Level\">\r\n      <div\r\n        className=\"level-item is-cherry fadeInUp\"\r\n        style={{animationDelay: '1s'}}\r\n      >\r\n        <h5>{t('Confirmed')}</h5>\r\n        <h4>\r\n          [\r\n          {isNaN(data.deltaconfirmed)\r\n            ? ''\r\n            : data.deltaconfirmed > 0\r\n            ? '+' + formatNumber(data.deltaconfirmed)\r\n            : '+0'}\r\n          ]\r\n        </h4>\r\n        <h1>{formatNumber(data.confirmed)} </h1>\r\n      </div>\r\n\r\n      <div\r\n        className=\"level-item is-blue fadeInUp\"\r\n        style={{animationDelay: '1.1s'}}\r\n      >\r\n        <h5 className=\"heading\">{t('Active')}</h5>\r\n        <h4>&nbsp;</h4>\r\n        <h1 className=\"title has-text-info\">{formatNumber(data.active)}</h1>\r\n      </div>\r\n\r\n      <div\r\n        className=\"level-item is-green fadeInUp\"\r\n        style={{animationDelay: '1.2s'}}\r\n      >\r\n        <h5 className=\"heading\">{t('Recovered')}</h5>\r\n        <h4>\r\n          [\r\n          {isNaN(data.deltarecovered)\r\n            ? ''\r\n            : data.deltarecovered > 0\r\n            ? '+' + formatNumber(data.deltarecovered)\r\n            : '+0'}\r\n          ]\r\n        </h4>\r\n        <h1 className=\"title has-text-success\">\r\n          {formatNumber(data.recovered)}{' '}\r\n        </h1>\r\n      </div>\r\n\r\n      <div\r\n        className=\"level-item is-gray fadeInUp\"\r\n        style={{animationDelay: '1.3s'}}\r\n      >\r\n        <h5 className=\"heading\">{t('Deceased')}</h5>\r\n        <h4>\r\n          [\r\n          {isNaN(data.deltadeaths)\r\n            ? ''\r\n            : data.deltadeaths > 0\r\n            ? '+' + formatNumber(data.deltadeaths)\r\n            : '+0'}\r\n          ]\r\n        </h4>\r\n        <h1 className=\"title has-text-grey\">{formatNumber(data.deaths)}</h1>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Level);\r\n","import * as d3 from 'd3';\r\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\r\n\r\nfunction Minigraph({timeseries}) {\r\n  const [timeSeriesData, setTimeSeriesData] = useState([]);\r\n  const svgRef1 = useRef();\r\n  const svgRef2 = useRef();\r\n  const svgRef3 = useRef();\r\n  const svgRef4 = useRef();\r\n\r\n  useEffect(() => {\r\n    setTimeSeriesData(timeseries.slice(timeseries.length - 20));\r\n  }, [timeseries]);\r\n\r\n  const graphData = useCallback((data) => {\r\n    if (data.length <= 1) return 0;\r\n\r\n    const margin = {top: 10, right: 5, bottom: 20, left: 5};\r\n    const chartRight = 100 - margin.right;\r\n    const chartBottom = 100 - margin.bottom;\r\n\r\n    const svg1 = d3.select(svgRef1.current);\r\n    const svg2 = d3.select(svgRef2.current);\r\n    const svg3 = d3.select(svgRef3.current);\r\n    const svg4 = d3.select(svgRef4.current);\r\n\r\n    data.forEach((d) => {\r\n      d['dailyactive'] = d.dailyconfirmed - d.dailyrecovered - d.dailydeceased;\r\n    });\r\n\r\n    const xScale = d3\r\n      .scaleTime()\r\n      .domain(d3.extent(data, (d) => d.date))\r\n      .range([margin.left, chartRight]);\r\n\r\n    const svgArray = [svg1, svg2, svg3, svg4];\r\n    const dataTypes = [\r\n      'dailyconfirmed',\r\n      'dailyactive',\r\n      'dailyrecovered',\r\n      'dailydeceased',\r\n    ];\r\n    const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d'];\r\n\r\n    const dailyMin = d3.min(data, (d) => d.dailyactive);\r\n    const dailyMax = d3.max(data, (d) =>\r\n      Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\r\n    );\r\n    const domainMinMax = Math.max(-dailyMin, dailyMax);\r\n\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([-domainMinMax, domainMinMax])\r\n      .range([chartBottom, margin.top]);\r\n\r\n    svgArray.forEach((svg, i) => {\r\n      const type = dataTypes[i];\r\n      const color = colors[i];\r\n\r\n      const path = svg\r\n        .append('path')\r\n        .datum(data)\r\n        .attr('fill', 'none')\r\n        .attr('stroke', color + '99')\r\n        .attr('stroke-width', 2.5)\r\n        .attr('cursor', 'pointer')\r\n        .attr(\r\n          'd',\r\n          d3\r\n            .line()\r\n            .x((d) => xScale(d.date))\r\n            .y((d) => yScale(d[type]))\r\n            .curve(d3.curveCardinal)\r\n        );\r\n\r\n      const totalLength = path.node().getTotalLength();\r\n      path\r\n        .attr('stroke-dasharray', totalLength + ' ' + totalLength)\r\n        .attr('stroke-dashoffset', totalLength)\r\n        .transition()\r\n        .delay(500)\r\n        .duration(2500)\r\n        .attr('stroke-dashoffset', 0);\r\n\r\n      svg\r\n        .selectAll('.dot')\r\n        .data(data.slice(data.length - 1))\r\n        .enter()\r\n        .append('circle')\r\n        .attr('fill', color)\r\n        .attr('stroke', color)\r\n        .attr('r', 2)\r\n        .attr('cursor', 'pointer')\r\n        .attr('cx', (d) => xScale(d.date))\r\n        .attr('cy', (d) => yScale(d[type]))\r\n        .on('mouseover', (d) => {\r\n          d3.select(d3.event.target).attr('r', '5');\r\n        })\r\n        .on('mouseout', (d) => {\r\n          d3.select(d3.event.target).attr('r', '2');\r\n        })\r\n        .style('opacity', 0)\r\n        .transition()\r\n        .delay(500)\r\n        .duration(2500)\r\n        .style('opacity', 1);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    graphData(timeSeriesData);\r\n  }, [timeSeriesData, graphData]);\r\n\r\n  return (\r\n    <div className=\"Minigraph\">\r\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '1.4s'}}>\r\n        <svg\r\n          ref={svgRef1}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-blue fadeInUp\"\r\n        style={{animationDelay: '1.5s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef2}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-green fadeInUp\"\r\n        style={{animationDelay: '1.6s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef3}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-gray fadeInUp\"\r\n        style={{animationDelay: '1.7s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef4}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Minigraph);\r\n","import {MAP_STATISTICS} from '../constants';\r\nimport {capitalizeAll, formatNumber} from '../utils/commonfunctions';\r\nimport {useResizeObserver} from '../utils/hooks';\r\n\r\nimport * as d3 from 'd3';\r\nimport React, {useEffect, useRef} from 'react';\r\n\r\nfunction MapLegend({mapScale, statistic, mapStatistic, mapOption}) {\r\n  const svgRef = useRef(null);\r\n  const wrapperRef = useRef();\r\n  const dimensions = useResizeObserver(wrapperRef);\r\n\r\n  useEffect(() => {\r\n    const svg = d3.select(svgRef.current);\r\n    const {width, height} =\r\n      dimensions || wrapperRef.current.getBoundingClientRect();\r\n\r\n    if (mapStatistic === MAP_STATISTICS.ZONE) {\r\n      svg.call(() =>\r\n        legend({\r\n          svg: svg,\r\n          color: mapScale,\r\n          width: width,\r\n          height: height,\r\n          tickValues: [],\r\n          marginLeft: 2,\r\n          marginRight: 20,\r\n          ordinalWeights: Object.values(statistic),\r\n        })\r\n      );\r\n    } else if (mapStatistic === MAP_STATISTICS.HOTSPOTS) {\r\n      const t = svg.transition().duration(500);\r\n      svg\r\n        .select('.ramp')\r\n        .transition(t)\r\n        .attr('opacity', 0)\r\n        .attr('xlink:href', null);\r\n\r\n      svg\r\n        .select('.bars')\r\n        .selectAll('rect')\r\n        .transition(t)\r\n        .attr('opacity', 0)\r\n        .remove();\r\n      svg.selectAll('.axis > *').remove();\r\n\r\n      const maxRadius = mapScale.domain()[1];\r\n\r\n      const legend = svg\r\n        .select('.circles')\r\n        .attr('transform', `translate(48,40)`)\r\n        .attr('text-anchor', 'middle');\r\n\r\n      legend\r\n        .selectAll('circle')\r\n        .data([maxRadius / 10, (maxRadius * 2) / 5, maxRadius])\r\n        .join('circle')\r\n        .attr('fill', 'none')\r\n        .attr('stroke', '#ccc')\r\n        .transition(t)\r\n        .attr('cy', (d) => -mapScale(d))\r\n        .attr('r', mapScale);\r\n\r\n      legend\r\n        .selectAll('text')\r\n        .data([maxRadius / 10, (maxRadius * 2) / 5, maxRadius])\r\n        .join('text')\r\n        .attr('dy', '1.3em')\r\n        .transition(t)\r\n        .attr('y', (d) => -2 * mapScale(d))\r\n        .text(d3.format('.1s'));\r\n    } else {\r\n      svg.call(() =>\r\n        legend({\r\n          svg: svg,\r\n          color: mapScale,\r\n          title:\r\n            capitalizeAll(mapOption) +\r\n            (mapStatistic === MAP_STATISTICS.PER_MILLION\r\n              ? ' cases per million'\r\n              : ' cases'),\r\n          width: width,\r\n          height: height,\r\n          ticks: 5,\r\n          tickFormat: function (d, i, n) {\r\n            if (mapStatistic === MAP_STATISTICS.TOTAL && !Number.isInteger(d))\r\n              return;\r\n            if (i === n.length - 1) return formatNumber(d) + '+';\r\n            return formatNumber(d);\r\n          },\r\n          marginLeft: 2,\r\n          marginRight: 20,\r\n        })\r\n      );\r\n    }\r\n    svg.attr('class', mapStatistic === MAP_STATISTICS.ZONE ? 'zone' : '');\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className=\"svg-parent maplegend fadeInUp\"\r\n      style={{animationDelay: '2.5s', height: 50}}\r\n      ref={wrapperRef}\r\n    >\r\n      <svg id=\"legend\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\r\n        <image className=\"ramp\" />\r\n        <g className=\"bars\"></g>\r\n        <g className=\"circles\"></g>\r\n        <g className=\"axis\">\r\n          <text className=\"axistext\" />\r\n        </g>\r\n      </svg>\r\n      <canvas\r\n        className=\"color-scale\"\r\n        style={{position: 'absolute', height: 0}}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapLegend;\r\n\r\nfunction legend({\r\n  svg,\r\n  color,\r\n  title,\r\n  tickSize = 6,\r\n  width = 320,\r\n  height = 44 + tickSize,\r\n  marginTop = 18,\r\n  marginRight = 0,\r\n  marginBottom = 16 + tickSize,\r\n  marginLeft = 0,\r\n  ticks = width / 64,\r\n  tickFormat,\r\n  tickValues,\r\n  ordinalWeights,\r\n} = {}) {\r\n  svg.selectAll('.circles > *').remove();\r\n  const t = svg.transition().duration(500);\r\n\r\n  let tickAdjust = (g) => {\r\n    const ticks = g.selectAll('.tick line');\r\n    ticks.attr('y1', marginTop + marginBottom - height);\r\n    // d3.select(ticks.nodes()[ticks.size() - 1]).remove();\r\n  };\r\n  let x;\r\n\r\n  // Continuous\r\n  if (color.interpolate) {\r\n    const n = Math.min(color.domain().length, color.range().length);\r\n\r\n    x = color\r\n      .copy()\r\n      .rangeRound(\r\n        d3.quantize(d3.interpolate(marginLeft, width - marginRight), n)\r\n      );\r\n\r\n    svg\r\n      .select('.ramp')\r\n      .attr('class', 'ramp')\r\n      .attr('x', marginLeft)\r\n      .attr('y', marginTop)\r\n      .attr('width', width - marginLeft - marginRight)\r\n      .attr('height', height - marginTop - marginBottom)\r\n      .attr('preserveAspectRatio', 'none')\r\n      .attr(\r\n        'xlink:href',\r\n        ramp(\r\n          color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))\r\n        ).toDataURL()\r\n      );\r\n  }\r\n\r\n  // Sequential\r\n  else if (color.interpolator) {\r\n    svg\r\n      .select('.bars')\r\n      .selectAll('rect')\r\n      .transition(t)\r\n      .attr('opacity', 0)\r\n      .remove();\r\n\r\n    x = Object.assign(\r\n      color\r\n        .copy()\r\n        .interpolator(d3.interpolateRound(marginLeft, width - marginRight)),\r\n      {\r\n        range() {\r\n          return [marginLeft, width - marginRight];\r\n        },\r\n      }\r\n    );\r\n\r\n    svg\r\n      .select('.ramp')\r\n      .attr('class', 'ramp')\r\n      .attr('x', marginLeft)\r\n      .attr('y', marginTop)\r\n      .attr('width', width - marginLeft - marginRight)\r\n      .attr('height', height - marginTop - marginBottom)\r\n      .attr('preserveAspectRatio', 'none')\r\n      .attr('xlink:href', ramp(color.interpolator()).toDataURL())\r\n      .transition(t)\r\n      .attr('opacity', 1);\r\n\r\n    // scaleSequentialQuantile doesnt implement ticks or tickFormat.\r\n    if (!x.ticks) {\r\n      if (tickValues === undefined) {\r\n        const n = Math.round(ticks + 1);\r\n        tickValues = d3\r\n          .range(n)\r\n          .map((i) => d3.quantile(color.domain(), i / (n - 1)));\r\n      }\r\n      if (typeof tickFormat !== 'function') {\r\n        tickFormat = d3.format(tickFormat === undefined ? ',f' : tickFormat);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Threshold\r\n  else if (color.invertExtent) {\r\n    const thresholds = color.thresholds\r\n      ? color.thresholds() // scaleQuantize\r\n      : color.quantiles\r\n      ? color.quantiles() // scaleQuantile\r\n      : color.domain(); // scaleThreshold\r\n\r\n    const thresholdFormat =\r\n      tickFormat === undefined\r\n        ? (d) => d\r\n        : typeof tickFormat === 'string'\r\n        ? d3.format(tickFormat)\r\n        : tickFormat;\r\n\r\n    x = d3\r\n      .scaleLinear()\r\n      .domain([-1, color.range().length - 1])\r\n      .rangeRound([marginLeft, width - marginRight]);\r\n\r\n    svg\r\n      .append('g')\r\n      .selectAll('rect')\r\n      .data(color.range())\r\n      .join('rect')\r\n      .attr('x', (d, i) => x(i - 1))\r\n      .attr('y', marginTop)\r\n      .attr('width', (d, i) => x(i) - x(i - 1))\r\n      .attr('height', height - marginTop - marginBottom)\r\n      .attr('fill', (d) => d);\r\n\r\n    tickValues = d3.range(-1, thresholds.length);\r\n    tickFormat = (i) => {\r\n      if (i === -1) return thresholdFormat(1);\r\n      else if (i === thresholds.length - 1) return;\r\n      else if (i === thresholds.length - 2)\r\n        return thresholdFormat(thresholds[i] + '+', i);\r\n      return thresholdFormat(thresholds[i], i);\r\n    };\r\n  }\r\n\r\n  // Ordinal\r\n  else {\r\n    svg\r\n      .select('.ramp')\r\n      .transition(t)\r\n      .attr('opacity', 0)\r\n      .attr('xlink:href', null);\r\n    if (!ordinalWeights) {\r\n      x = d3\r\n        .scaleBand()\r\n        .domain(color.domain())\r\n        .rangeRound([marginLeft, width - marginRight]);\r\n      svg\r\n        .selectAll('rect')\r\n        .data(color.domain())\r\n        .join('rect')\r\n        .attr('x', x)\r\n        .attr('y', marginTop)\r\n        .attr('width', Math.max(0, x.bandwidth() - 1))\r\n        .attr('height', height - marginTop - marginBottom)\r\n        .attr('fill', color);\r\n    } else {\r\n      const widthScale = d3\r\n        .scaleLinear()\r\n        .domain([0, ordinalWeights.reduce((a, b) => a + b)])\r\n        .rangeRound([0, width - marginLeft - marginRight]);\r\n\r\n      const xPos = ordinalWeights.map((w, i) =>\r\n        ordinalWeights\r\n          .slice(0, i)\r\n          .reduce((acc, w) => acc + widthScale(w), marginLeft)\r\n      );\r\n\r\n      x = d3.scaleOrdinal().domain(color.domain()).range(xPos);\r\n\r\n      svg\r\n        .select('.bars')\r\n        .selectAll('rect')\r\n        .data(color.domain())\r\n        .join((enter) =>\r\n          enter\r\n            .append('rect')\r\n            .attr('x', x)\r\n            .attr('width', (d, i) => widthScale(ordinalWeights[i]))\r\n        )\r\n        .attr('y', marginTop)\r\n        .attr('height', height - marginTop - marginBottom)\r\n        .attr('fill', color)\r\n        .transition(t)\r\n        .attr('x', x)\r\n        .attr('width', (d, i) => widthScale(ordinalWeights[i]))\r\n        .attr('opacity', 1);\r\n    }\r\n\r\n    tickAdjust = () => {};\r\n  }\r\n\r\n  svg\r\n    .select('.axis')\r\n    .attr('transform', `translate(0,${height - marginBottom})`)\r\n    .transition(t)\r\n    .attr('class', 'axis')\r\n    .call(\r\n      d3\r\n        .axisBottom(x)\r\n        .ticks(ticks, typeof tickFormat === 'string' ? tickFormat : undefined)\r\n        .tickFormat(typeof tickFormat === 'function' ? tickFormat : undefined)\r\n        .tickSize(tickSize)\r\n        .tickValues(tickValues)\r\n    )\r\n    .on('start', () => {\r\n      svg.call(tickAdjust).call((svg) => svg.select('.domain').remove());\r\n    })\r\n    .call((g) =>\r\n      g\r\n        .select('.axistext')\r\n        .attr('class', 'axistext')\r\n        .attr('x', marginLeft)\r\n        .attr('y', marginTop + marginBottom - height - 6)\r\n        .attr('fill', 'currentColor')\r\n        .attr('text-anchor', 'start')\r\n        .attr('font-weight', 'bold')\r\n        .text(title)\r\n    );\r\n\r\n  return svg.node();\r\n}\r\n\r\nfunction ramp(color, n = 256) {\r\n  // const canvas = document.createElement('canvas');\r\n  const canvas = d3.select('.color-scale').node();\r\n  const context = ((canvas.width = n), (canvas.height = 1), canvas).getContext(\r\n    '2d'\r\n  );\r\n  for (let i = 0; i < n; ++i) {\r\n    context.fillStyle = color(i / (n - 1));\r\n    context.fillRect(i, 0, 1, 1);\r\n  }\r\n  return canvas;\r\n}\r\n","import MapLegend from './maplegend';\r\n\r\nimport {MAP_META, MAP_STATISTICS, MAP_TYPES, MAP_VIEWS} from '../constants';\r\nimport {capitalizeAll} from '../utils/commonfunctions';\r\n\r\nimport * as d3 from 'd3';\r\nimport React, {useCallback, useEffect, useMemo, useRef} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport useSWR from 'swr';\r\nimport * as topojson from 'topojson';\r\n\r\nconst colorInterpolator = (caseType, t) => {\r\n  switch (caseType) {\r\n    case 'confirmed':\r\n      return d3.interpolateReds(t * 0.85);\r\n    case 'active':\r\n      return d3.interpolateBlues(t * 0.85);\r\n    case 'recovered':\r\n      return d3.interpolateGreens(t * 0.85);\r\n    case 'deceased':\r\n      return d3.interpolateGreys(t * 0.85);\r\n    default:\r\n      return;\r\n  }\r\n};\r\n\r\nconst caseColor = (caseType, alpha = '') => {\r\n  switch (caseType) {\r\n    case 'confirmed':\r\n      return '#ff073a' + alpha;\r\n    case 'active':\r\n      return '#007bff' + alpha;\r\n    case 'recovered':\r\n      return '#28a745' + alpha;\r\n    case 'deceased':\r\n      return '#6c757d' + alpha;\r\n    default:\r\n      return;\r\n  }\r\n};\r\n\r\nfunction ChoroplethMap({\r\n  statistic,\r\n  mapData,\r\n  currentMap,\r\n  changeMap,\r\n  regionHighlighted,\r\n  setRegionHighlighted,\r\n  mapOption,\r\n  isCountryLoaded,\r\n}) {\r\n  const {t} = useTranslation();\r\n  const svgRef = useRef(null);\r\n\r\n  const mapMeta = MAP_META[currentMap.name];\r\n  const geoDataResponse = useSWR(mapMeta.geoDataFile, async (file) => {\r\n    return await d3.json(file);\r\n  });\r\n\r\n  const mapScale = useMemo(() => {\r\n    if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n      return d3.scaleOrdinal(\r\n        ['Red', 'Orange', 'Green'],\r\n        ['#d73027', '#fee08b', '#66bd63']\r\n      );\r\n    } else if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\r\n      const {width} = svgRef.current.getBoundingClientRect();\r\n      return d3\r\n        .scaleSqrt([0, statistic[mapOption].max], [0, width / 10])\r\n        .clamp(true);\r\n    } else {\r\n      return d3\r\n        .scaleSequential([0, Math.max(1, statistic[mapOption].max)], (t) =>\r\n          colorInterpolator(mapOption, t)\r\n        )\r\n        .clamp(true);\r\n    }\r\n  }, [currentMap.stat, statistic, mapOption]);\r\n\r\n  useEffect(() => {\r\n    if (!geoDataResponse.data) return;\r\n    const geoData = geoDataResponse.data;\r\n\r\n    const topology = topojson.feature(\r\n      geoData,\r\n      geoData.objects[mapMeta.graphObjectStates || mapMeta.graphObjectDistricts]\r\n    );\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\n    if (!svg.attr('viewBox')) {\r\n      const {\r\n        width: widthDefault,\r\n        height: heightDefault,\r\n      } = svgRef.current.getBoundingClientRect();\r\n      const projection = isCountryLoaded\r\n        ? d3.geoMercator().fitWidth(widthDefault, topology)\r\n        : d3.geoMercator().fitSize([widthDefault, heightDefault], topology);\r\n      const path = d3.geoPath(projection);\r\n      const bBox = path.bounds(topology);\r\n      const [width, height] = [+bBox[1][0], bBox[1][1]];\r\n      svg.attr('viewBox', `0 0 ${width} ${height}`);\r\n    }\r\n    const bBox = svg.attr('viewBox').split(' ');\r\n    const [width, height] = [+bBox[2], +bBox[3]];\r\n\r\n    const projection = d3.geoMercator().fitSize([width, height], topology);\r\n    const path = d3.geoPath(projection);\r\n\r\n    // Add id to each feature\r\n    let features =\r\n      currentMap.stat !== MAP_STATISTICS.HOTSPOTS\r\n        ? currentMap.view === MAP_VIEWS.STATES\r\n          ? topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectStates]\r\n            ).features\r\n          : topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectDistricts]\r\n            ).features\r\n        : [\r\n            ...topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectStates]\r\n            ).features,\r\n            ...topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectDistricts]\r\n            ).features,\r\n          ];\r\n\r\n    features = features.map((f) => {\r\n      const district = f.properties.district;\r\n      const state = f.properties.st_nm;\r\n      const obj = Object.assign({}, f);\r\n      obj.id = `${currentMap.name}-${state}${district ? '-' + district : ''}`;\r\n      return obj;\r\n    });\r\n\r\n    /* Draw map */\r\n    const t = d3.transition().duration(500);\r\n    let onceTouchedRegion = null;\r\n    const regionSelection = svg\r\n      .select('.regions')\r\n      .selectAll('path')\r\n      .data(\r\n        currentMap.stat !== MAP_STATISTICS.HOTSPOTS ? features : [],\r\n        (d) => d.id\r\n      )\r\n      .join((enter) => {\r\n        const sel = enter\r\n          .append('path')\r\n          .attr('d', path)\r\n          .attr('stroke-width', 2)\r\n          .attr('stroke-opacity', 0)\r\n          .style('cursor', 'pointer')\r\n          .on('mouseenter', (d) => {\r\n            const region = {state: d.properties.st_nm};\r\n            if (d.properties.district) region.district = d.properties.district;\r\n            setRegionHighlighted(region);\r\n          })\r\n          .on('mouseleave', (d) => {\r\n            if (onceTouchedRegion === d) onceTouchedRegion = null;\r\n          })\r\n          .on('touchstart', (d) => {\r\n            if (onceTouchedRegion === d) onceTouchedRegion = null;\r\n            else onceTouchedRegion = d;\r\n          })\r\n          .on('click', (d) => {\r\n            d3.event.stopPropagation();\r\n            if (onceTouchedRegion || mapMeta.mapType === MAP_TYPES.STATE)\r\n              return;\r\n            // Disable pointer events till the new map is rendered\r\n            svg.attr('pointer-events', 'none');\r\n            svg\r\n              .select('.regions')\r\n              .selectAll('path')\r\n              .attr('pointer-events', 'none');\r\n            // Switch map\r\n            changeMap(d.properties.st_nm);\r\n          });\r\n        sel.append('title');\r\n        return sel;\r\n      })\r\n      .attr('pointer-events', 'none');\r\n\r\n    regionSelection\r\n      .transition(t)\r\n      .attr('fill', (d) => {\r\n        let n;\r\n        if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n          const state = d.properties.st_nm;\r\n          const district = d.properties.district;\r\n          n =\r\n            mapData[state] && mapData[state][district]\r\n              ? mapData[state][district]\r\n              : 0;\r\n        } else {\r\n          const state = d.properties.st_nm;\r\n          const district = d.properties.district;\r\n          if (district)\r\n            n =\r\n              mapData[state] &&\r\n              mapData[state][district] &&\r\n              mapData[state][district][mapOption]\r\n                ? mapData[state][district][mapOption]\r\n                : 0;\r\n          else\r\n            n =\r\n              mapData[state] && mapData[state][mapOption]\r\n                ? mapData[state][mapOption]\r\n                : 0;\r\n        }\r\n        const color = n === 0 ? '#ffffff00' : mapScale(n);\r\n        return color;\r\n      })\r\n      .attr(\r\n        'stroke',\r\n        currentMap.stat === MAP_STATISTICS.ZONE\r\n          ? '#343a40'\r\n          : caseColor(mapOption)\r\n      )\r\n      .on('end', function () {\r\n        d3.select(this).attr('pointer-events', 'all');\r\n      });\r\n\r\n    regionSelection.select('title').text((d) => {\r\n      if (currentMap.stat === MAP_STATISTICS.TOTAL) {\r\n        const state = d.properties.st_nm;\r\n        const district = d.properties.district;\r\n        let n;\r\n        if (district)\r\n          n =\r\n            mapData[state] && mapData[state][district]\r\n              ? mapData[state][district][mapOption]\r\n              : 0;\r\n        else n = mapData[state] ? mapData[state][mapOption] : 0;\r\n        return (\r\n          Number(\r\n            parseFloat(\r\n              100 * (n / (statistic[mapOption].total || 0.001))\r\n            ).toFixed(2)\r\n          ).toString() +\r\n          '% from ' +\r\n          capitalizeAll(district ? district : state)\r\n        );\r\n      }\r\n    });\r\n\r\n    svg\r\n      .transition()\r\n      .duration(mapMeta.mapType === MAP_TYPES.STATE ? t.duration() / 2 : 0)\r\n      .on('end', () =>\r\n        svg.attr('class', currentMap.stat === MAP_STATISTICS.ZONE ? 'zone' : '')\r\n      );\r\n\r\n    /* ----------BUBBLE MAP----------*/\r\n    let circlesData = [];\r\n    if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\r\n      circlesData = features\r\n        .map((d) => {\r\n          const district = d.properties.district;\r\n          const state = d.properties.st_nm;\r\n          if (district) {\r\n            d.value =\r\n              mapData[state] && mapData[state][district]\r\n                ? mapData[state][district][mapOption]\r\n                : 0;\r\n          } else {\r\n            d.value =\r\n              mapData[state] && mapData[state].Unknown\r\n                ? mapData[state].Unknown[mapOption]\r\n                : 0;\r\n          }\r\n          return d;\r\n        })\r\n        .sort((a, b) => b.value - a.value);\r\n    }\r\n\r\n    svg\r\n      .select('.circles')\r\n      .selectAll('circle')\r\n      .data(circlesData, (d) => d.id)\r\n      .join((enter) =>\r\n        enter\r\n          .append('circle')\r\n          .attr('transform', (d) => `translate(${path.centroid(d)})`)\r\n          .attr('fill-opacity', 0.5)\r\n          .style('cursor', 'pointer')\r\n          .attr('pointer-events', 'all')\r\n          .on('mouseenter', (d) => {\r\n            const region = {\r\n              state: d.properties.st_nm,\r\n              district: d.properties.district || 'Unknown',\r\n            };\r\n            setRegionHighlighted(region);\r\n          })\r\n          .on('click', () => {\r\n            d3.event.stopPropagation();\r\n          })\r\n      )\r\n      .transition(t)\r\n      .attr('fill', caseColor(mapOption, '70'))\r\n      .attr('stroke', caseColor(mapOption, '70'))\r\n      .attr('r', (d) => mapScale(d.value));\r\n    /* ------------------------------*/\r\n\r\n    let meshStates = [];\r\n    if (mapMeta.mapType === MAP_TYPES.COUNTRY) {\r\n      meshStates = [\r\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectStates]),\r\n      ];\r\n      meshStates[0].id = mapMeta.graphObjectStates;\r\n    }\r\n    let meshDistricts = [];\r\n    if (currentMap.view === MAP_VIEWS.DISTRICTS) {\r\n      // Add id to mesh\r\n      meshDistricts = [\r\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectDistricts]),\r\n      ];\r\n      meshDistricts[0].id = mapMeta.graphObjectDistricts;\r\n    }\r\n\r\n    svg\r\n      .select(\r\n        currentMap.view === MAP_VIEWS.STATES\r\n          ? '.state-borders'\r\n          : '.district-borders'\r\n      )\r\n      .attr('fill', 'none')\r\n      .attr('stroke-width', function () {\r\n        return mapMeta.mapType === MAP_TYPES.COUNTRY &&\r\n          currentMap.view === MAP_VIEWS.DISTRICTS\r\n          ? 0\r\n          : width / 250;\r\n      })\r\n      .selectAll('path')\r\n      .data(\r\n        currentMap.view === MAP_VIEWS.STATES ? meshStates : meshDistricts,\r\n        (d) => d.id\r\n      )\r\n      .join((enter) => enter.append('path').attr('d', path))\r\n      .transition(t)\r\n      .attr('stroke', () => {\r\n        if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n          return '#00000060';\r\n        } else {\r\n          return caseColor(mapOption, '30');\r\n        }\r\n      });\r\n\r\n    svg\r\n      .select(\r\n        currentMap.view === MAP_VIEWS.STATES\r\n          ? '.district-borders'\r\n          : '.state-borders'\r\n      )\r\n      .selectAll('path')\r\n      .data(\r\n        currentMap.view === MAP_VIEWS.STATES ? meshDistricts : meshStates,\r\n        (d) => d.id\r\n      )\r\n      .join((enter) =>\r\n        enter\r\n          .append('path')\r\n          .attr('d', path)\r\n          .attr('fill', 'none')\r\n          .attr('stroke-width', width / 250)\r\n      )\r\n      .transition(t)\r\n      .attr('stroke', '#343a4099');\r\n\r\n    // Reset on tapping outside map\r\n    svg.attr('pointer-events', 'auto').on('click', () => {\r\n      if (mapMeta.mapType !== MAP_TYPES.STATE) {\r\n        setRegionHighlighted({\r\n          state: 'Total',\r\n        });\r\n      }\r\n    });\r\n  }, [\r\n    geoDataResponse.data,\r\n    mapMeta,\r\n    currentMap,\r\n    setRegionHighlighted,\r\n    changeMap,\r\n    isCountryLoaded,\r\n    mapScale,\r\n    statistic,\r\n    mapData,\r\n    mapOption,\r\n  ]);\r\n\r\n  const highlightRegionInMap = useCallback(\r\n    (state, district) => {\r\n      const svg = d3.select(svgRef.current);\r\n      if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\r\n        svg\r\n          .select('.circles')\r\n          .selectAll('circle')\r\n          .attr('fill-opacity', (d) => {\r\n            const highlighted =\r\n              district &&\r\n              state === d.properties.st_nm &&\r\n              (district === d.properties.district ||\r\n                (district === 'Unknown' && !d.properties.district));\r\n            return highlighted ? 1 : 0.5;\r\n          });\r\n      } else {\r\n        svg\r\n          .select('.regions')\r\n          .selectAll('path')\r\n          .each(function (d) {\r\n            const highlighted =\r\n              district === d.properties?.district &&\r\n              state === d.properties.st_nm;\r\n            if (highlighted) this.parentNode.appendChild(this);\r\n            d3.select(this).attr('stroke-opacity', highlighted ? 1 : 0);\r\n          });\r\n      }\r\n    },\r\n    [currentMap.stat]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!geoDataResponse.data) return;\r\n    highlightRegionInMap(regionHighlighted.state, regionHighlighted.district);\r\n  }, [\r\n    geoDataResponse.data,\r\n    highlightRegionInMap,\r\n    regionHighlighted.state,\r\n    regionHighlighted.district,\r\n    mapOption,\r\n  ]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '2.5s'}}>\r\n        <svg id=\"chart\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\r\n          <g className=\"regions\" />\r\n          <g className=\"state-borders\" />\r\n          {currentMap.view === MAP_VIEWS.DISTRICTS && (\r\n            <g className=\"district-borders\" />\r\n          )}\r\n          {currentMap.stat === MAP_STATISTICS.HOTSPOTS && (\r\n            <g className=\"circles\" />\r\n          )}\r\n        </svg>\r\n        {mapMeta.mapType === MAP_TYPES.STATE &&\r\n        mapData[currentMap.name]?.Unknown &&\r\n        mapData[currentMap.name]?.Unknown[mapOption] ? (\r\n          <div className=\"disclaimer\">\r\n            <Icon.AlertCircle />\r\n            {t('District-wise {{mapOption}} numbers are under reconciliation', {\r\n              mapOption: t(mapOption),\r\n            })}\r\n          </div>\r\n        ) : (\r\n          ''\r\n        )}\r\n      </div>\r\n\r\n      {mapScale && (\r\n        <MapLegend\r\n          mapScale={mapScale}\r\n          statistic={statistic}\r\n          mapStatistic={currentMap.stat}\r\n          mapOption={mapOption}\r\n        />\r\n      )}\r\n\r\n      <svg style={{position: 'absolute', height: 0}}>\r\n        <defs>\r\n          <filter id=\"balance-color\" colorInterpolationFilters=\"sRGB\">\r\n            <feColorMatrix\r\n              type=\"matrix\"\r\n              values=\"0.91372549  0           0            0  0.08627451\r\n                      0           0.91372549  0            0  0.08627451\r\n                      0           0           0.854901961  0  0.145098039\r\n                      0           0           0            1  0\"\r\n            />\r\n          </filter>\r\n        </defs>\r\n      </svg>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ChoroplethMap;\r\n","import ChoroplethMap from './choropleth';\r\nimport {testedToolTip} from './tooltips';\r\n\r\nimport {\r\n  MAP_META,\r\n  MAP_STATISTICS,\r\n  MAP_TYPES,\r\n  MAP_VIEWS,\r\n  STATE_CODES_REVERSE,\r\n  STATE_POPULATIONS,\r\n} from '../constants';\r\nimport {\r\n  formatDate,\r\n  formatNumber,\r\n  formatDayMonth,\r\n  formatLastUpdated,\r\n} from '../utils/commonfunctions';\r\n\r\nimport {parse} from 'date-fns';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState, useEffect, useMemo, useCallback} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\r\n    return false;\r\n  }\r\n  if (!equal(prevProps.mapOption, currProps.mapOption)) {\r\n    return false;\r\n  }\r\n  if (!equal(prevProps.anchor, currProps.anchor)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nconst getRegionFromState = (state) => {\r\n  if (!state) return;\r\n  const region = {...state};\r\n  return region;\r\n};\r\n\r\nconst getRegionFromDistrict = (districtData, name) => {\r\n  if (!districtData) return;\r\n  const region = {...districtData};\r\n  return region;\r\n};\r\n\r\nfunction MapExplorer({\r\n  mapName,\r\n  states,\r\n  districts,\r\n  zones,\r\n  stateTestData,\r\n  regionHighlighted,\r\n  setRegionHighlighted,\r\n  anchor,\r\n  setAnchor,\r\n  mapOption,\r\n  setMapOption,\r\n  isCountryLoaded = true,\r\n}) {\r\n  const {t} = useTranslation();\r\n  const [currentMap, setCurrentMap] = useState({\r\n    name: mapName,\r\n    stat: MAP_STATISTICS.TOTAL,\r\n    view:\r\n      MAP_META[mapName].mapType === MAP_TYPES.COUNTRY\r\n        ? MAP_VIEWS.STATES\r\n        : MAP_VIEWS.DISTRICTS,\r\n  });\r\n  const currentMapMeta = MAP_META[currentMap.name];\r\n\r\n  const [statistic, currentMapData] = useMemo(() => {\r\n    let currentMapData = {};\r\n    let statistic = {};\r\n    if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n      const dataTypes = ['Red', 'Orange', 'Green'];\r\n      statistic = dataTypes.reduce((acc, dtype) => {\r\n        acc[dtype] = 0;\r\n        return acc;\r\n      }, {});\r\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY) {\r\n        currentMapData = Object.keys(zones).reduce((acc1, state) => {\r\n          acc1[state] = Object.keys(zones[state]).reduce((acc2, district) => {\r\n            const zone = zones[state][district].zone;\r\n            if (zone) {\r\n              acc2[district] = zone;\r\n              statistic[zone] += 1;\r\n            }\r\n            return acc2;\r\n          }, {});\r\n          return acc1;\r\n        }, {});\r\n      } else if (currentMapMeta.mapType === MAP_TYPES.STATE) {\r\n        const state = currentMap.name;\r\n        currentMapData[state] = Object.keys(zones[state]).reduce(\r\n          (acc, district) => {\r\n            const zone = zones[state][district].zone;\r\n            if (zone) {\r\n              acc[district] = zone;\r\n              statistic[zone] += 1;\r\n            }\r\n            return acc;\r\n          },\r\n          {}\r\n        );\r\n      }\r\n    } else {\r\n      const dataTypes = ['confirmed', 'active', 'recovered', 'deceased'];\r\n      statistic = dataTypes.reduce((acc, dtype) => {\r\n        acc[dtype] = {total: 0, max: 0};\r\n        return acc;\r\n      }, {});\r\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY) {\r\n        if (currentMap.view === MAP_VIEWS.STATES) {\r\n          currentMapData = states.reduce((acc, state) => {\r\n            acc[state.state] = {};\r\n            dataTypes.forEach((dtype) => {\r\n              let typeCount =\r\n                parseInt(state[dtype !== 'deceased' ? dtype : 'deaths']) || 0;\r\n              if (currentMap.stat === MAP_STATISTICS.PER_MILLION)\r\n                typeCount = (1e6 * typeCount) / STATE_POPULATIONS[state.state];\r\n              if (state.state !== 'Total') {\r\n                statistic[dtype].total += typeCount;\r\n                if (typeCount > statistic[dtype].max) {\r\n                  statistic[dtype].max = typeCount;\r\n                }\r\n              }\r\n              acc[state.state][dtype] = typeCount;\r\n            });\r\n            return acc;\r\n          }, {});\r\n        } else {\r\n          currentMapData = Object.keys(districts).reduce((acc1, state) => {\r\n            const districtWiseData = (districts[state] || {districtData: {}})\r\n              .districtData;\r\n            acc1[state] = Object.keys(districtWiseData).reduce(\r\n              (acc2, district) => {\r\n                acc2[district] = {};\r\n                dataTypes.forEach((dtype) => {\r\n                  const typeCount = parseInt(districtWiseData[district][dtype]);\r\n                  statistic[dtype].total += typeCount;\r\n                  if (typeCount > statistic[dtype].max) {\r\n                    statistic[dtype].max = typeCount;\r\n                  }\r\n                  acc2[district][dtype] = typeCount;\r\n                });\r\n                return acc2;\r\n              },\r\n              {}\r\n            );\r\n            return acc1;\r\n          }, {});\r\n        }\r\n      } else if (currentMapMeta.mapType === MAP_TYPES.STATE) {\r\n        const districtWiseData = (\r\n          districts[currentMap.name] || {districtData: {}}\r\n        ).districtData;\r\n        currentMapData[currentMap.name] = Object.keys(districtWiseData).reduce(\r\n          (acc, district) => {\r\n            acc[district] = {};\r\n            dataTypes.forEach((dtype) => {\r\n              const typeCount = parseInt(districtWiseData[district][dtype]);\r\n              statistic[dtype].total += typeCount;\r\n              if (typeCount > statistic[dtype].max) {\r\n                statistic[dtype].max = typeCount;\r\n              }\r\n              acc[district][dtype] = typeCount;\r\n            });\r\n            return acc;\r\n          },\r\n          {}\r\n        );\r\n        currentMapData[currentMap.name].Total = states.find(\r\n          (state) => currentMap.name === state.state\r\n        );\r\n      }\r\n    }\r\n    return [statistic, currentMapData];\r\n  }, [currentMap, currentMapMeta.mapType, districts, zones, states]);\r\n\r\n  const [hoveredRegion, panelRegion] = useMemo(() => {\r\n    if (!regionHighlighted.district) {\r\n      const state = getRegionFromState(\r\n        states.find((state) => regionHighlighted.state === state.state)\r\n      );\r\n      return [state, state];\r\n    } else {\r\n      const stateDistrictObj = districts[regionHighlighted.state] || {\r\n        districtData: {},\r\n      };\r\n      const districtData = stateDistrictObj.districtData[\r\n        regionHighlighted.district\r\n      ] || {\r\n        confirmed: 0,\r\n        active: 0,\r\n        recovered: 0,\r\n        deaths: 0,\r\n      };\r\n      const district = getRegionFromDistrict(\r\n        districtData,\r\n        regionHighlighted.district\r\n      );\r\n      let state = getRegionFromState(\r\n        states.find((state) => state.state === regionHighlighted.state)\r\n      );\r\n      district.district = regionHighlighted.district;\r\n      district.state = state.state;\r\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\r\n        state = states.find((state) => state.state === 'Total');\r\n      return [district, state];\r\n    }\r\n  }, [\r\n    states,\r\n    districts,\r\n    currentMapMeta.mapType,\r\n    regionHighlighted.state,\r\n    regionHighlighted.district,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (regionHighlighted.district) {\r\n      if (\r\n        currentMap.name !== regionHighlighted.state &&\r\n        !(\r\n          currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\r\n          currentMap.view === MAP_VIEWS.DISTRICTS\r\n        )\r\n      ) {\r\n        const state = regionHighlighted.state;\r\n        const newMapMeta = MAP_META[state];\r\n        if (!newMapMeta) {\r\n          return;\r\n        }\r\n        setCurrentMap({\r\n          name: state,\r\n          view: MAP_VIEWS.DISTRICTS,\r\n          stat:\r\n            currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n              ? MAP_STATISTICS.TOTAL\r\n              : currentMap.stat,\r\n        });\r\n      }\r\n    } else if (isCountryLoaded && currentMapMeta.mapType === MAP_TYPES.STATE) {\r\n      setCurrentMap({\r\n        name: 'India',\r\n        view:\r\n          currentMap.stat === MAP_STATISTICS.ZONE\r\n            ? MAP_VIEWS.DISTRICTS\r\n            : MAP_VIEWS.STATES,\r\n        stat: currentMap.stat,\r\n      });\r\n    }\r\n  }, [\r\n    isCountryLoaded,\r\n    regionHighlighted.state,\r\n    regionHighlighted.district,\r\n    currentMap,\r\n    currentMapMeta.mapType,\r\n  ]);\r\n\r\n  const switchMapToState = useCallback(\r\n    (state) => {\r\n      const newMapMeta = MAP_META[state];\r\n      if (!newMapMeta) {\r\n        return;\r\n      }\r\n      if (newMapMeta.mapType === MAP_TYPES.STATE) {\r\n        const {districtData} = districts[state] || {\r\n          districtData: {},\r\n        };\r\n        const topDistrict = Object.keys(districtData)\r\n          .filter((state) => state !== 'Unknown')\r\n          .sort((a, b) => {\r\n            return districtData[b].confirmed - districtData[a].confirmed;\r\n          })[0];\r\n        ReactDOM.unstable_batchedUpdates(() => {\r\n          setRegionHighlighted({\r\n            district: topDistrict,\r\n            state: state,\r\n          });\r\n          setCurrentMap({\r\n            name: state,\r\n            view: MAP_VIEWS.DISTRICTS,\r\n            stat:\r\n              currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n                ? MAP_STATISTICS.TOTAL\r\n                : currentMap.stat,\r\n          });\r\n        });\r\n      } else {\r\n        ReactDOM.unstable_batchedUpdates(() => {\r\n          setCurrentMap({\r\n            name: 'India',\r\n            view:\r\n              currentMap.stat === MAP_STATISTICS.ZONE\r\n                ? MAP_VIEWS.DISTRICTS\r\n                : MAP_VIEWS.STATES,\r\n            stat: currentMap.stat,\r\n          });\r\n          setRegionHighlighted({\r\n            state: 'Total',\r\n          });\r\n        });\r\n      }\r\n    },\r\n    [currentMap.stat, districts, setRegionHighlighted]\r\n  );\r\n\r\n  const testObj = stateTestData[panelRegion.state];\r\n\r\n  let hoveredRegionCount;\r\n  let hoveredRegionZone;\r\n  if (currentMap.stat !== MAP_STATISTICS.ZONE) {\r\n    const data =\r\n      hoveredRegion.district && currentMapData[hoveredRegion.state]\r\n        ? currentMapData[hoveredRegion.state][hoveredRegion.district]\r\n        : hoveredRegion.state !== currentMap.name\r\n        ? currentMapData[hoveredRegion.state]\r\n        : currentMapData[hoveredRegion.state].Total;\r\n    hoveredRegionCount = data\r\n      ? currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n        ? Number(parseFloat(data[mapOption]).toFixed(2))\r\n        : data[mapOption]\r\n      : 0;\r\n  } else {\r\n    hoveredRegionZone =\r\n      zones[hoveredRegion.state] &&\r\n      zones[hoveredRegion.state][hoveredRegion.district]\r\n        ? zones[hoveredRegion.state][hoveredRegion.district].zone\r\n        : '';\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`MapExplorer fadeInUp ${\r\n        anchor === 'mapexplorer' ? 'stickied' : ''\r\n      }`}\r\n      style={{\r\n        animationDelay: '1.5s',\r\n        display: anchor === 'timeseries' ? 'none' : '',\r\n      }}\r\n    >\r\n      {window.innerWidth > 769 && (\r\n        <div\r\n          className={`anchor ${anchor === 'mapexplorer' ? 'stickied' : ''}`}\r\n          onClick={() => {\r\n            setAnchor(anchor === 'mapexplorer' ? null : 'mapexplorer');\r\n          }}\r\n        >\r\n          <Icon.Anchor />\r\n        </div>\r\n      )}\r\n      <div className=\"header\">\r\n        <h1>\r\n          {t(currentMap.name)} {t('Map')}\r\n        </h1>\r\n        <h6>\r\n          {t('{{action}} over a {{mapType}} for more details', {\r\n            action: t(window.innerWidth <= 769 ? 'Tap' : 'Hover'),\r\n            mapType: t(\r\n              currentMapMeta.mapType === MAP_TYPES.COUNTRY\r\n                ? 'state/UT'\r\n                : 'District'\r\n            ),\r\n          })}\r\n        </h6>\r\n      </div>\r\n\r\n      <div className=\"map-stats\">\r\n        <div\r\n          className={`stats fadeInUp ${\r\n            mapOption === 'confirmed' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2s'}}\r\n          onClick={() => setMapOption('confirmed')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Cnfmd') : t('Confirmed')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.confirmed)}</h1>\r\n            <h6>{`+${formatNumber(panelRegion.deltaconfirmed)}`}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`stats is-blue fadeInUp ${\r\n            mapOption === 'active' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2.1s'}}\r\n          onClick={() => setMapOption('active')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Actv') : t('Active')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.active)}</h1>\r\n            <h6>{` `}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`stats is-green fadeInUp ${\r\n            mapOption === 'recovered' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2.2s'}}\r\n          onClick={() => setMapOption('recovered')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Rcvrd') : t('Recovered')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.recovered)}</h1>\r\n            <h6>{`+${formatNumber(panelRegion.deltarecovered)}`}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`stats is-gray fadeInUp ${\r\n            mapOption === 'deceased' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2.3s'}}\r\n          onClick={() => setMapOption('deceased')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Dcsd') : t('Deceased')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.deaths)}</h1>\r\n            <h6>{`+${formatNumber(panelRegion.deltadeaths)}`}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className=\"stats is-purple tested fadeInUp\"\r\n          style={{animationDelay: '2.4s'}}\r\n        >\r\n          <h5>{t('Tested')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(testObj?.totaltested)}</h1>\r\n          </div>\r\n          <h6 className=\"timestamp\">\r\n            {!isNaN(parse(testObj?.updatedon, 'dd/MM/yyyy', new Date()))\r\n              ? t('As of {{date}}', {\r\n                  date: formatDayMonth(testObj?.updatedon),\r\n                })\r\n              : ''}\r\n          </h6>\r\n          {testObj?.totaltested?.length > 1 && (\r\n            <a href={testObj.source} target=\"_noblank\">\r\n              <Icon.Link />\r\n            </a>\r\n          )}\r\n          {panelRegion.state === 'Total' ? testedToolTip : ''}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"meta fadeInUp\" style={{animationDelay: '2.4s'}}>\r\n        <h2\r\n          className={`${\r\n            currentMap.stat !== MAP_STATISTICS.ZONE\r\n              ? mapOption !== 'confirmed'\r\n                ? mapOption\r\n                : ''\r\n              : hoveredRegionZone\r\n          }`}\r\n        >\r\n          {hoveredRegion.district\r\n            ? t(hoveredRegion.district) +\r\n              (hoveredRegion.district === 'Unknown'\r\n                ? ` (${t(hoveredRegion.state)})`\r\n                : '')\r\n            : t(hoveredRegion.state)}\r\n        </h2>\r\n\r\n        {currentMapMeta.mapType !== MAP_TYPES.STATE &&\r\n          panelRegion.lastupdatedtime && (\r\n            <div className=\"last-update\">\r\n              <h6>{t('Last updated')}</h6>\r\n              <h3>\r\n                {isNaN(Date.parse(formatDate(panelRegion.lastupdatedtime)))\r\n                  ? ''\r\n                  : formatLastUpdated(panelRegion.lastupdatedtime) +\r\n                    ' ' +\r\n                    t('ago')}\r\n              </h3>\r\n            </div>\r\n          )}\r\n\r\n        {currentMapMeta.mapType === MAP_TYPES.STATE ? (\r\n          <Link to={`state/${STATE_CODES_REVERSE[panelRegion.state]}`}>\r\n            <div className=\"button state-page-button\">\r\n              <abbr>{t('Visit state page')}</abbr>\r\n              <Icon.ArrowRightCircle />\r\n            </div>\r\n          </Link>\r\n        ) : null}\r\n\r\n        {currentMap.stat !== MAP_STATISTICS.ZONE &&\r\n        (currentMapMeta.mapType === MAP_TYPES.STATE ||\r\n          (currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\r\n            currentMap.stat !== MAP_STATISTICS.TOTAL)) &&\r\n        (currentMap.stat !== MAP_STATISTICS.HOTSPOTS ||\r\n          hoveredRegion?.district) ? (\r\n          <h1\r\n            className={`district ${mapOption !== 'confirmed' ? mapOption : ''}`}\r\n          >\r\n            {hoveredRegionCount}\r\n            <br />\r\n            <span>\r\n              {t(mapOption)}{' '}\r\n              {currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n                ? ` ${t('per million')}`\r\n                : ''}\r\n            </span>\r\n          </h1>\r\n        ) : null}\r\n\r\n        {currentMapMeta.mapType === MAP_TYPES.STATE ? (\r\n          <div\r\n            className=\"button back-button\"\r\n            onClick={() => switchMapToState('India')}\r\n          >\r\n            {t('Back')}\r\n          </div>\r\n        ) : null}\r\n\r\n        {currentMapMeta.mapType === MAP_TYPES.STATE &&\r\n        currentMapData.Unknown &&\r\n        currentMapData.Unknown[mapOption] > 0 ? (\r\n          <h4 className=\"unknown\">\r\n            {t('Districts unknown for')} {currentMapData.Unknown[mapOption]}{' '}\r\n            {t('people')}\r\n          </h4>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div>\r\n        {mapOption && (\r\n          <ChoroplethMap\r\n            statistic={statistic}\r\n            currentMap={currentMap}\r\n            mapData={currentMapData}\r\n            regionHighlighted={regionHighlighted}\r\n            setRegionHighlighted={setRegionHighlighted}\r\n            changeMap={switchMapToState}\r\n            mapOption={mapOption}\r\n            isCountryLoaded={isCountryLoaded}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"tabs-map\">\r\n        <div\r\n          className={`tab ${\r\n            currentMap.stat === MAP_STATISTICS.TOTAL ? 'focused' : ''\r\n          }`}\r\n          onClick={() => {\r\n            setCurrentMap({\r\n              name: currentMap.name,\r\n              view:\r\n                currentMapMeta.mapType === MAP_TYPES.COUNTRY\r\n                  ? MAP_VIEWS.STATES\r\n                  : MAP_VIEWS.DISTRICTS,\r\n              stat: MAP_STATISTICS.TOTAL,\r\n            });\r\n            if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\r\n              setRegionHighlighted({\r\n                state: regionHighlighted.state,\r\n              });\r\n          }}\r\n        >\r\n          <h4>{t('Total Cases')}</h4>\r\n        </div>\r\n        {isCountryLoaded && (\r\n          <div\r\n            className={`tab ${\r\n              currentMap.stat === MAP_STATISTICS.PER_MILLION ? 'focused' : ''\r\n            }`}\r\n            onClick={() => {\r\n              if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\r\n              setCurrentMap({\r\n                name: currentMap.name,\r\n                view: MAP_VIEWS.STATES,\r\n                stat: MAP_STATISTICS.PER_MILLION,\r\n              });\r\n              setRegionHighlighted({\r\n                state: regionHighlighted.state,\r\n              });\r\n            }}\r\n          >\r\n            <h4>\r\n              {t('Cases per million')}\r\n              <sup>&dagger;</sup>\r\n            </h4>\r\n          </div>\r\n        )}\r\n        {isCountryLoaded && (\r\n          <div\r\n            className={`tab ${\r\n              currentMap.stat === MAP_STATISTICS.HOTSPOTS ? 'focused' : ''\r\n            }`}\r\n            onClick={() => {\r\n              if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\r\n              setCurrentMap({\r\n                name: currentMap.name,\r\n                view: MAP_VIEWS.DISTRICTS,\r\n                stat: MAP_STATISTICS.HOTSPOTS,\r\n              });\r\n            }}\r\n          >\r\n            <h4>{t('Hotspots')}</h4>\r\n          </div>\r\n        )}\r\n        <div\r\n          className={`tab ${\r\n            currentMap.stat === MAP_STATISTICS.ZONE ? 'focused' : ''\r\n          }`}\r\n          onClick={() => {\r\n            setCurrentMap({\r\n              name: currentMap.name,\r\n              view: MAP_VIEWS.DISTRICTS,\r\n              stat: MAP_STATISTICS.ZONE,\r\n            });\r\n            if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\r\n              setRegionHighlighted({\r\n                state: 'Total',\r\n              });\r\n          }}\r\n        >\r\n          <h4>{t('Zones')}</h4>\r\n        </div>\r\n      </div>\r\n\r\n      <h6 className=\"footnote table-fineprint\">\r\n        &dagger; {t('Based on 2019 population projection by NCP') + ' ('}\r\n        <a\r\n          href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\r\n          target=\"_noblank\"\r\n          style={{color: '#6c757d'}}\r\n        >\r\n          {t('source')}\r\n        </a>\r\n        )\r\n      </h6>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(MapExplorer, isEqual);\r\n","import {testedToolTip} from './tooltips';\r\n\r\nimport {\r\n  sliceTimeseriesFromEnd,\r\n  formatNumber,\r\n  formatTimeseriesDate,\r\n  formatTimeseriesTickX,\r\n} from '../utils/commonfunctions';\r\nimport {useResizeObserver} from '../utils/hooks';\r\n\r\nimport * as d3 from 'd3';\r\nimport {addDays, subDays} from 'date-fns';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!currProps.isIntersecting) return true;\r\n  if (!prevProps.isIntersecting) return false;\r\n  if (!equal(currProps.chartType, prevProps.chartType)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.mode, prevProps.mode)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.logMode, prevProps.logMode)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.stateCode, prevProps.stateCode)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction TimeSeries({timeseriesProp, chartType, mode, logMode, stateCode}) {\r\n  const {t} = useTranslation();\r\n  const [lastDaysCount, setLastDaysCount] = useState(\r\n    window.innerWidth > 512 ? Infinity : 30\r\n  );\r\n  const [timeseries, setTimeseries] = useState({});\r\n  const [datapoint, setDatapoint] = useState({});\r\n  const [index, setIndex] = useState(0);\r\n  const [moving, setMoving] = useState(false);\r\n\r\n  const svgRef1 = useRef();\r\n  const svgRef2 = useRef();\r\n  const svgRef3 = useRef();\r\n  const svgRef4 = useRef();\r\n  const svgRef5 = useRef();\r\n\r\n  const wrapperRef = useRef();\r\n  const dimensions = useResizeObserver(wrapperRef);\r\n\r\n  const transformTimeSeries = useCallback(\r\n    (timeseries) => {\r\n      if (timeseries.length > 1) {\r\n        const slicedTimeseries = sliceTimeseriesFromEnd(\r\n          timeseries,\r\n          lastDaysCount\r\n        );\r\n        setIndex(slicedTimeseries.length - 1);\r\n        setTimeseries(slicedTimeseries);\r\n      }\r\n    },\r\n    [lastDaysCount]\r\n  );\r\n\r\n  useEffect(() => {\r\n    transformTimeSeries(timeseriesProp);\r\n  }, [lastDaysCount, timeseriesProp, transformTimeSeries]);\r\n\r\n  const graphData = useCallback(\r\n    (timeseries) => {\r\n      const {width, height} =\r\n        dimensions || wrapperRef.current.getBoundingClientRect();\r\n\r\n      // Margins\r\n      const margin = {top: 15, right: 35, bottom: 25, left: 25};\r\n      const chartRight = width - margin.right;\r\n      const chartBottom = height - margin.bottom;\r\n\r\n      const T = timeseries.length;\r\n      const yBufferTop = 1.2;\r\n      const yBufferBottom = 1.1;\r\n\r\n      setDatapoint(timeseries[T - 1]);\r\n      setIndex(T - 1);\r\n\r\n      const svg1 = d3.select(svgRef1.current);\r\n      const svg2 = d3.select(svgRef2.current);\r\n      const svg3 = d3.select(svgRef3.current);\r\n      const svg4 = d3.select(svgRef4.current);\r\n      const svg5 = d3.select(svgRef5.current);\r\n\r\n      const dateMin = subDays(timeseries[0].date, 1);\r\n      const dateMax = addDays(timeseries[T - 1].date, 1);\r\n\r\n      const xScale = d3\r\n        .scaleTime()\r\n        .clamp(true)\r\n        .domain([dateMin, dateMax])\r\n        .range([margin.left, chartRight]);\r\n\r\n      // Number of x-axis ticks\r\n      const numTicksX = width < 480 ? 4 : 7;\r\n\r\n      const xAxis = (g) =>\r\n        g.attr('class', 'x-axis').call(\r\n          d3\r\n            .axisBottom(xScale)\r\n            .ticks(numTicksX)\r\n            .tickFormat((tick) => {\r\n              return formatTimeseriesTickX(tick);\r\n            })\r\n        );\r\n\r\n      const xAxis2 = (g, yScale) => {\r\n        g.attr('class', 'x-axis2')\r\n          .call(d3.axisBottom(xScale).tickValues([]).tickSize(0))\r\n          .select('.domain')\r\n          .style('transform', `translateY(${yScale(0)}px)`);\r\n\r\n        if (yScale(0) !== chartBottom) g.select('.domain').attr('opacity', 0.4);\r\n        else g.select('.domain').attr('opacity', 0);\r\n      };\r\n\r\n      const yAxis = (g, yScale) =>\r\n        g\r\n          .attr('class', 'y-axis')\r\n          .call(d3.axisRight(yScale).ticks(4, '0~s').tickPadding(5));\r\n\r\n      // Arrays of objects\r\n      const plotTotal = chartType === 1;\r\n      const dataTypesTotal = [\r\n        'totalconfirmed',\r\n        'totalactive',\r\n        'totalrecovered',\r\n        'totaldeceased',\r\n        'totaltested',\r\n      ];\r\n      const dataTypesDaily = [\r\n        'dailyconfirmed',\r\n        'dailyactive',\r\n        'dailyrecovered',\r\n        'dailydeceased',\r\n        'dailytested',\r\n      ];\r\n\r\n      const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d', '#201aa2'];\r\n\r\n      const svgArray = [svg1, svg2, svg3, svg4, svg5];\r\n\r\n      let yScales;\r\n      if (plotTotal) {\r\n        const uniformScaleMin = d3.min(timeseries, (d) =>\r\n          Math.min(d.totalactive, d.totalrecovered, d.totaldeceased)\r\n        );\r\n        const uniformScaleMax = d3.max(timeseries, (d) => d.totalconfirmed);\r\n        const yScaleUniformLinear = d3\r\n          .scaleLinear()\r\n          .clamp(true)\r\n          .domain([uniformScaleMin, Math.max(1, yBufferTop * uniformScaleMax)])\r\n          .nice()\r\n          .range([chartBottom, margin.top]);\r\n\r\n        const yScaleUniformLog = d3\r\n          .scaleLog()\r\n          .clamp(true)\r\n          .domain([\r\n            Math.max(1, uniformScaleMin),\r\n            Math.max(10, yBufferTop * uniformScaleMax),\r\n          ])\r\n          .nice()\r\n          .range([chartBottom, margin.top]);\r\n\r\n        yScales = dataTypesTotal.map((type) => {\r\n          const yScaleLinear = d3\r\n            .scaleLinear()\r\n            .clamp(true)\r\n            .domain([\r\n              d3.min(timeseries, (d) => d[type]),\r\n              Math.max(1, yBufferTop * d3.max(timeseries, (d) => d[type])),\r\n            ])\r\n            .nice()\r\n            .range([chartBottom, margin.top]);\r\n          const yScaleLog = d3\r\n            .scaleLog()\r\n            .clamp(true)\r\n            .domain([\r\n              Math.max(\r\n                1,\r\n                d3.min(timeseries, (d) => d[type])\r\n              ),\r\n              Math.max(10, yBufferTop * d3.max(timeseries, (d) => d[type])),\r\n            ])\r\n            .nice()\r\n            .range([chartBottom, margin.top]);\r\n          if (mode && type !== 'totaltested')\r\n            return logMode ? yScaleUniformLog : yScaleUniformLinear;\r\n          else return logMode ? yScaleLog : yScaleLinear;\r\n        });\r\n      } else {\r\n        const yScaleDailyUniform = d3\r\n          .scaleLinear()\r\n          .clamp(true)\r\n          .domain([\r\n            yBufferBottom *\r\n              Math.min(\r\n                0,\r\n                d3.min(timeseries, (d) => d.dailyactive)\r\n              ),\r\n            Math.max(\r\n              1,\r\n              yBufferTop *\r\n                d3.max(timeseries, (d) =>\r\n                  Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\r\n                )\r\n            ),\r\n          ])\r\n          .nice()\r\n          .range([chartBottom, margin.top]);\r\n\r\n        yScales = dataTypesDaily.map((type) => {\r\n          if (mode && type !== 'dailytested') return yScaleDailyUniform;\r\n          const yScaleLinear = d3\r\n            .scaleLinear()\r\n            .clamp(true)\r\n            .domain([\r\n              yBufferBottom *\r\n                Math.min(\r\n                  0,\r\n                  d3.min(timeseries, (d) => d[type])\r\n                ),\r\n              Math.max(1, yBufferTop * d3.max(timeseries, (d) => d[type])),\r\n            ])\r\n            .nice()\r\n            .range([chartBottom, margin.top]);\r\n          return yScaleLinear;\r\n        });\r\n      }\r\n\r\n      /* Focus dots */\r\n      const focus = svgArray.map((svg, i) => {\r\n        return svg\r\n          .selectAll('.focus')\r\n          .data([timeseries[T - 1]], (d) => d.date)\r\n          .join((enter) =>\r\n            enter.append('circle').attr('cx', (d) => xScale(d.date))\r\n          )\r\n          .attr('class', 'focus')\r\n          .attr('fill', colors[i])\r\n          .attr('stroke', colors[i])\r\n          .attr('r', 4);\r\n      });\r\n\r\n      function mousemove() {\r\n        const xm = d3.mouse(this)[0];\r\n        const date = xScale.invert(xm);\r\n        const bisectDate = d3.bisector((d) => d.date).left;\r\n        let i = bisectDate(timeseries, date, 1);\r\n        if (0 <= i && i < T) {\r\n          if (date - timeseries[i - 1].date < timeseries[i].date - date) --i;\r\n          setDatapoint(timeseries[i]);\r\n          setIndex(i);\r\n          setMoving(true);\r\n          const d = timeseries[i];\r\n          focus.forEach((f, j) => {\r\n            const yScale = yScales[j];\r\n            const type = plotTotal ? dataTypesTotal[j] : dataTypesDaily[j];\r\n            if (!isNaN(d[type]))\r\n              f.attr('cx', xScale(d.date))\r\n                .attr('cy', yScale(d[type]))\r\n                .attr('opacity', 1);\r\n            else f.attr('opacity', 0);\r\n          });\r\n        }\r\n      }\r\n\r\n      function mouseout() {\r\n        setDatapoint(timeseries[T - 1]);\r\n        setIndex(T - 1);\r\n        setMoving(false);\r\n        focus.forEach((f, j) => {\r\n          const yScale = yScales[j];\r\n          const type = plotTotal ? dataTypesTotal[j] : dataTypesDaily[j];\r\n          if (!isNaN(timeseries[T - 1][type]))\r\n            f.attr('cx', xScale(timeseries[T - 1].date))\r\n              .attr('cy', yScale(timeseries[T - 1][type]))\r\n              .attr('opacity', 1);\r\n          else f.attr('opacity', 0);\r\n        });\r\n      }\r\n\r\n      /* Begin drawing charts */\r\n      svgArray.forEach((svg, i) => {\r\n        // Transition interval\r\n        const t = svg.transition().duration(500);\r\n        const typeTotal = dataTypesTotal[i];\r\n        const typeDaily = dataTypesDaily[i];\r\n        const type = plotTotal ? typeTotal : typeDaily;\r\n\r\n        const filteredTimeseries = timeseries.filter((d) => !isNaN(d[type]));\r\n        const color = colors[i];\r\n        const yScale = yScales[i];\r\n\r\n        /* X axis */\r\n        svg\r\n          .select('.x-axis')\r\n          .style('transform', `translateY(${chartBottom}px)`)\r\n          .transition(t)\r\n          .call(xAxis);\r\n        svg.select('.x-axis2').transition(t).call(xAxis2, yScale);\r\n        /* Y axis */\r\n        svg\r\n          .select('.y-axis')\r\n          .style('transform', `translateX(${chartRight}px)`)\r\n          .transition(t)\r\n          .call(yAxis, yScale);\r\n\r\n        /* Path dots */\r\n        svg\r\n          .selectAll('.dot')\r\n          .data(filteredTimeseries, (d) => d.date)\r\n          .join((enter) =>\r\n            enter\r\n              .append('circle')\r\n              .attr('cy', chartBottom)\r\n              .attr('cx', (d) => xScale(d.date))\r\n          )\r\n          .attr('class', 'dot')\r\n          .attr('fill', color)\r\n          .attr('stroke', color)\r\n          .attr('r', 2)\r\n          .transition(t)\r\n          .attr('cx', (d) => xScale(d.date))\r\n          .attr('cy', (d) => yScale(d[type]));\r\n\r\n        if (!isNaN(timeseries[T - 1][type]))\r\n          focus[i]\r\n            .transition(t)\r\n            .attr('cx', (d) => xScale(d.date))\r\n            .attr('cy', (d) => yScale(d[type]))\r\n            .attr('opacity', 1);\r\n        else focus[i].transition(t).attr('opacity', 0);\r\n\r\n        if (plotTotal) {\r\n          /* TOTAL TRENDS */\r\n          svg.selectAll('.stem').remove();\r\n          const path = svg\r\n            .selectAll('.trend')\r\n            .data([[...filteredTimeseries].reverse()])\r\n            .join('path')\r\n            .attr('class', 'trend')\r\n            .attr('fill', 'none')\r\n            .attr('stroke', color + '99')\r\n            .attr('stroke-width', 4);\r\n          // HACK\r\n          // Path interpolation is non-trivial. Ideally, a custom path tween\r\n          // function should be defined which takes care that old path dots\r\n          // transition synchronously along with the path transition. This hack\r\n          // simulates that behaviour.\r\n          if (path.attr('d')) {\r\n            const n = path.node().getTotalLength();\r\n            const p = path.node().getPointAtLength(n);\r\n            // Append points at end of path for better interpolation\r\n            path.attr(\r\n              'd',\r\n              () => path.attr('d') + `L${p.x},${p.y}`.repeat(3 * T)\r\n            );\r\n          }\r\n          path\r\n            .transition(t)\r\n            .attr('opacity', plotTotal ? 1 : 0)\r\n            .attr(\r\n              'd',\r\n              d3\r\n                .line()\r\n                .x((d) => xScale(d.date))\r\n                .y((d) => yScale(d[typeTotal]))\r\n                .curve(d3.curveMonotoneX)\r\n            );\r\n        } else {\r\n          /* DAILY TRENDS */\r\n          svg.selectAll('.trend').remove();\r\n          svg\r\n            .selectAll('.stem')\r\n            .data(filteredTimeseries, (d) => d.date)\r\n            .join((enter) =>\r\n              enter\r\n                .append('line')\r\n                .attr('x1', (d) => xScale(d.date))\r\n                .attr('y1', chartBottom)\r\n                .attr('x2', (d) => xScale(d.date))\r\n                .attr('y2', chartBottom)\r\n            )\r\n            .attr('class', 'stem')\r\n            .style('stroke', color + '99')\r\n            .style('stroke-width', 4)\r\n            .transition(t)\r\n            .attr('x1', (d) => xScale(d.date))\r\n            .attr('y1', yScale(0))\r\n            .attr('x2', (d) => xScale(d.date))\r\n            .attr('y2', (d) => yScale(d[typeDaily]));\r\n        }\r\n\r\n        svg\r\n          .on('mousemove', mousemove)\r\n          .on('touchmove', mousemove)\r\n          .on('mouseout', mouseout)\r\n          .on('touchend', mouseout);\r\n      });\r\n    },\r\n    [chartType, dimensions, logMode, mode]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (timeseries.length > 1) {\r\n      graphData(timeseries);\r\n    }\r\n  }, [timeseries, graphData]);\r\n\r\n  const dateStr = datapoint.date ? formatTimeseriesDate(datapoint.date) : '';\r\n\r\n  const chartKey1 = chartType === 1 ? 'totalconfirmed' : 'dailyconfirmed';\r\n  const chartKey2 = chartType === 1 ? 'totalactive' : 'dailyactive';\r\n  const chartKey3 = chartType === 1 ? 'totalrecovered' : 'dailyrecovered';\r\n  const chartKey4 = chartType === 1 ? 'totaldeceased' : 'dailydeceased';\r\n  const chartKey5 = chartType === 1 ? 'totaltested' : 'dailytested';\r\n\r\n  // Function for calculate increased/decreased count for each type of data\r\n  const currentStatusCount = (chartType) => {\r\n    if (timeseries.length <= 0 || index <= 0 || index >= timeseries.length)\r\n      return '';\r\n    const currentDiff =\r\n      timeseries[index][chartType] - timeseries[index - 1][chartType];\r\n    const formatedDiff = formatNumber(currentDiff);\r\n    return currentDiff >= 0 ? `+${formatedDiff}` : formatedDiff;\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"TimeSeries fadeInUp\" style={{animationDelay: '2.7s'}}>\r\n        <div className=\"svg-parent\" ref={wrapperRef}>\r\n          <div className=\"stats\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Confirmed')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey1])}</h2>\r\n              <h6>{currentStatusCount(chartKey1)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef1} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-blue\">\r\n          <div className=\"stats is-blue\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Active')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey2])}</h2>\r\n              <h6>{currentStatusCount(chartKey2)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef2} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-green\">\r\n          <div className=\"stats is-green\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Recovered')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey3])}</h2>\r\n              <h6>{currentStatusCount(chartKey3)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef3} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-gray\">\r\n          <div className=\"stats is-gray\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Deceased')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey4])}</h2>\r\n              <h6>{currentStatusCount(chartKey4)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef4} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-purple\">\r\n          <div className=\"stats is-purple\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>\r\n              {t('Tested')} {stateCode === 'TT' ? testedToolTip : ''}\r\n            </h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey5])}</h2>\r\n              <h6>{currentStatusCount(chartKey5)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef5} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"pills\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setLastDaysCount(Infinity)}\r\n          className={lastDaysCount === Infinity ? 'selected' : ''}\r\n        >\r\n          {t('Beginning')}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setLastDaysCount(30)}\r\n          className={lastDaysCount === 30 ? 'selected' : ''}\r\n          aria-label=\"1 month\"\r\n        >\r\n          {`1 ${t('Month')}`}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setLastDaysCount(14)}\r\n          className={lastDaysCount === 14 ? 'selected' : ''}\r\n          aria-label=\"14 days\"\r\n        >\r\n          {`2 ${t('Weeks')}`}\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default React.memo(TimeSeries, isEqual);\r\n","import TimeSeries from './timeseries';\r\n\r\nimport 'intersection-observer';\r\nimport Observer from '@researchgate/react-intersection-observer';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useLocalStorage} from 'react-use';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(currProps.activeStateCode, prevProps.activeStateCode)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.anchor, prevProps.anchor)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction TimeSeriesExplorer({\r\n  timeseries,\r\n  activeStateCode,\r\n  onHighlightState,\r\n  states,\r\n  anchor,\r\n  setAnchor,\r\n}) {\r\n  const [chartType, setChartType] = useLocalStorage('timeseriesChartType', 1);\r\n  const [isTimeseriesIntersecting, setIsTimeseriesIntersecting] = useState(\r\n    false\r\n  );\r\n\r\n  const [timeseriesMode, setTimeseriesMode] = useLocalStorage(\r\n    'timeseriesMode',\r\n    true\r\n  );\r\n  const [timeseriesLogMode, setTimeseriesLogMode] = useLocalStorage(\r\n    'timeseriesLogMode',\r\n    false\r\n  );\r\n  const {t} = useTranslation();\r\n\r\n  const options = {\r\n    rootMargin: '0px 0px 0px 0px',\r\n  };\r\n\r\n  return (\r\n    <Observer\r\n      options={options}\r\n      onChange={({isIntersecting}) =>\r\n        setIsTimeseriesIntersecting(isIntersecting)\r\n      }\r\n    >\r\n      <div\r\n        className={`TimeSeriesExplorer ${\r\n          anchor === 'timeseries' ? 'stickied' : ''\r\n        }`}\r\n        style={{display: anchor === 'mapexplorer' ? 'none' : ''}}\r\n      >\r\n        <div\r\n          className=\"timeseries-header fadeInUp\"\r\n          style={{animationDelay: '2.5s'}}\r\n        >\r\n          {window.innerWidth > 769 && anchor !== undefined && (\r\n            <div\r\n              className={`anchor ${anchor === 'timeseries' ? 'stickied' : ''}`}\r\n              onClick={() => {\r\n                setAnchor(anchor === 'timeseries' ? null : 'timeseries');\r\n              }}\r\n            >\r\n              <Icon.Anchor />\r\n            </div>\r\n          )}\r\n\r\n          <h1>{t('Spread Trends')}</h1>\r\n          <div className=\"tabs\">\r\n            <div\r\n              className={`tab ${chartType === 1 ? 'focused' : ''}`}\r\n              onClick={() => {\r\n                setChartType(1);\r\n              }}\r\n            >\r\n              <h4>{t('Cumulative')}</h4>\r\n            </div>\r\n            <div\r\n              className={`tab ${chartType === 2 ? 'focused' : ''}`}\r\n              onClick={() => {\r\n                setChartType(2);\r\n              }}\r\n            >\r\n              <h4>{t('Daily')}</h4>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"scale-modes\">\r\n            <label className=\"main\">{t('Scale Modes')}</label>\r\n            <div className=\"timeseries-mode\">\r\n              <label htmlFor=\"timeseries-mode\">{t('Uniform')}</label>\r\n              <input\r\n                id=\"timeseries-mode\"\r\n                type=\"checkbox\"\r\n                checked={timeseriesMode}\r\n                className=\"switch\"\r\n                aria-label={t('Checked by default to scale uniformly.')}\r\n                onChange={(event) => {\r\n                  setTimeseriesMode(!timeseriesMode);\r\n                }}\r\n              />\r\n            </div>\r\n            <div\r\n              className={`timeseries-logmode ${\r\n                chartType !== 1 ? 'disabled' : ''\r\n              }`}\r\n            >\r\n              <label htmlFor=\"timeseries-logmode\">{t('Logarithmic')}</label>\r\n              <input\r\n                id=\"timeseries-logmode\"\r\n                type=\"checkbox\"\r\n                checked={chartType === 1 && timeseriesLogMode}\r\n                className=\"switch\"\r\n                disabled={chartType !== 1}\r\n                onChange={(event) => {\r\n                  setTimeseriesLogMode(!timeseriesLogMode);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {states && (\r\n            <div className=\"trends-state-name\">\r\n              <select\r\n                value={activeStateCode}\r\n                onChange={({target}) => {\r\n                  const selectedState = target.selectedOptions[0].getAttribute(\r\n                    'statedata'\r\n                  );\r\n                  onHighlightState(JSON.parse(selectedState));\r\n                }}\r\n              >\r\n                {states.map((s) => {\r\n                  return (\r\n                    <option\r\n                      value={s.statecode}\r\n                      key={s.statecode}\r\n                      statedata={JSON.stringify(s)}\r\n                    >\r\n                      {s.statecode === 'TT' ? t('All States') : t(s.state)}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {timeseries && (\r\n          <TimeSeries\r\n            timeseriesProp={timeseries}\r\n            chartType={chartType}\r\n            mode={timeseriesMode}\r\n            logMode={timeseriesLogMode}\r\n            stateCode={activeStateCode}\r\n            isIntersecting={isTimeseriesIntersecting}\r\n          />\r\n        )}\r\n\r\n        <div className=\"alert\">\r\n          <Icon.AlertOctagon />\r\n          <div className=\"alert-right\">\r\n            {t('Tested chart is independent of uniform scaling')}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Observer>\r\n  );\r\n}\r\n\r\nexport default React.memo(TimeSeriesExplorer, isEqual);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ExternalLink = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"15 3 21 3 21 9\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"10\",\n    y1: \"14\",\n    x2: \"21\",\n    y2: \"3\"\n  }));\n});\nExternalLink.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nExternalLink.displayName = 'ExternalLink';\nexport default ExternalLink;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Phone = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\"\n  }));\n});\nPhone.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nPhone.displayName = 'Phone';\nexport default Phone;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Search = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"11\",\n    cy: \"11\",\n    r: \"8\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"21\",\n    y1: \"21\",\n    x2: \"16.65\",\n    y2: \"16.65\"\n  }));\n});\nSearch.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nSearch.displayName = 'Search';\nexport default Search;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar X = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"18\",\n    y1: \"6\",\n    x2: \"6\",\n    y2: \"18\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"6\",\n    y1: \"6\",\n    x2: \"18\",\n    y2: \"18\"\n  }));\n});\nX.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nX.displayName = 'X';\nexport default X;","import { useEffect } from 'react';\nimport useTimeoutFn from './useTimeoutFn';\nexport default function useDebounce(fn, ms, deps) {\n    if (ms === void 0) { ms = 0; }\n    if (deps === void 0) { deps = []; }\n    var _a = useTimeoutFn(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];\n    useEffect(reset, deps);\n    return [isReady, cancel];\n}\n","/* eslint-disable */\nimport { useCallback, useEffect, useRef } from 'react';\nexport default function useTimeoutFn(fn, ms) {\n    if (ms === void 0) { ms = 0; }\n    var ready = useRef(false);\n    var timeout = useRef();\n    var callback = useRef(fn);\n    var isReady = useCallback(function () { return ready.current; }, []);\n    var set = useCallback(function () {\n        ready.current = false;\n        timeout.current && clearTimeout(timeout.current);\n        timeout.current = setTimeout(function () {\n            ready.current = true;\n            callback.current();\n        }, ms);\n    }, [ms]);\n    var clear = useCallback(function () {\n        ready.current = null;\n        timeout.current && clearTimeout(timeout.current);\n    }, []);\n    // update ref when function changes\n    useEffect(function () {\n        callback.current = fn;\n    }, [fn]);\n    // set on mount, clear on unmount\n    useEffect(function () {\n        set();\n        return clear;\n    }, [ms]);\n    return [isReady, clear, set];\n}\n","import {\r\n  STATE_CODES_ARRAY,\r\n  STATE_CODES_REVERSE,\r\n  STATE_CODES,\r\n} from '../constants';\r\n\r\nimport classnames from 'classnames';\r\nimport Bloodhound from 'corejs-typeahead';\r\nimport React, {useState, useCallback, useRef} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link} from 'react-router-dom';\r\nimport {useDebounce} from 'react-use';\r\n\r\nconst engine = new Bloodhound({\r\n  initialize: true,\r\n  local: STATE_CODES_ARRAY,\r\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\r\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),\r\n});\r\n\r\nconst districtEngine = new Bloodhound({\r\n  initialize: true,\r\n  limit: 5,\r\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\r\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('district'),\r\n  indexRemote: true,\r\n  remote: {\r\n    url: 'https://api.covid19india.org/state_district_wise.json',\r\n    transform: function (response) {\r\n      const districts = [];\r\n      Object.keys(response).map((stateName) => {\r\n        const districtData = response[stateName].districtData;\r\n        Object.keys(districtData).map((districtName) => {\r\n          return districts.push({district: districtName, state: stateName});\r\n        });\r\n        return null;\r\n      });\r\n      return districts;\r\n    },\r\n  },\r\n});\r\n\r\nconst essentialsEngine = new Bloodhound({\r\n  initialize: true,\r\n  limit: 5,\r\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\r\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace(\r\n    'category',\r\n    'city',\r\n    'contact',\r\n    'descriptionandorserviceprovided',\r\n    'nameoftheorganisation',\r\n    'state'\r\n  ),\r\n  indexRemote: true,\r\n  remote: {\r\n    url: 'https://api.covid19india.org/resources/resources.json',\r\n    transform: function (response) {\r\n      return response.resources;\r\n    },\r\n  },\r\n});\r\n\r\n/* let focused = false;\r\nconst suggestions = [\r\n  'Karnataka',\r\n  'West Bengal',\r\n  'Alappuzha',\r\n  'Senior citizen support bangalore',\r\n  'Community Kitchen in Kerala',\r\n  'Groceries Chennai',\r\n];*/\r\n\r\nfunction Search({districtZones}) {\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [expand, setExpand] = useState(false);\r\n  const [results, setResults] = useState([]);\r\n  const searchInput = useRef(null);\r\n  const {t} = useTranslation();\r\n\r\n  const handleSearch = useCallback((searchInput) => {\r\n    const results = [];\r\n\r\n    const sync = (datums) => {\r\n      datums.map((result, index) => {\r\n        const stateObj = {\r\n          name: result.name,\r\n          type: 'state',\r\n          route: result.code,\r\n        };\r\n        results.push(stateObj);\r\n        return null;\r\n      });\r\n    };\r\n\r\n    const districtSync = (datums) => {\r\n      datums.slice(0, 3).map((result, index) => {\r\n        const districtObj = {\r\n          name: result.district,\r\n          type: 'district',\r\n          route: STATE_CODES_REVERSE[result.state],\r\n        };\r\n        results.push(districtObj);\r\n        return null;\r\n      });\r\n    };\r\n\r\n    const essentialsSync = (datums) => {\r\n      datums.slice(0, 5).map((result, index) => {\r\n        const essentialsObj = {\r\n          name: result.nameoftheorganisation,\r\n          type: 'essentials',\r\n          category: result.category,\r\n          website: result.contact,\r\n          description: result.descriptionandorserviceprovided,\r\n          city: result.city,\r\n          state: result.state,\r\n          contact: result.phonenumber,\r\n        };\r\n        results.push(essentialsObj);\r\n        return null;\r\n      });\r\n      setResults([...results]);\r\n    };\r\n\r\n    engine.search(searchInput, sync);\r\n    districtEngine.search(searchInput, districtSync);\r\n    essentialsEngine.search(searchInput, essentialsSync);\r\n  }, []);\r\n\r\n  useDebounce(\r\n    () => {\r\n      if (searchValue) {\r\n        handleSearch(searchValue);\r\n      } else {\r\n        setResults([]);\r\n      }\r\n    },\r\n    100,\r\n    [searchValue]\r\n  );\r\n\r\n  function setNativeValue(element, value) {\r\n    const valueSetter = Object.getOwnPropertyDescriptor(element, 'value').set;\r\n    const prototype = Object.getPrototypeOf(element);\r\n    const prototypeValueSetter = Object.getOwnPropertyDescriptor(\r\n      prototype,\r\n      'value'\r\n    ).set;\r\n\r\n    if (valueSetter && valueSetter !== prototypeValueSetter) {\r\n      prototypeValueSetter.call(element, value);\r\n    } else {\r\n      valueSetter.call(element, value);\r\n    }\r\n  }\r\n\r\n  /* function fillPlaceholder(target, index, cursorPosition, callback) {\r\n    if (focused) {\r\n      target.textContent = '';\r\n      return true;\r\n    }\r\n    const text = t(suggestions[index]);\r\n    const placeholder = target.textContent;\r\n    target.classList.remove('disappear');\r\n    target.textContent = placeholder + text[cursorPosition];\r\n    if (cursorPosition < text.length - 1) {\r\n      setTimeout(function () {\r\n        fillPlaceholder(target, index, cursorPosition + 1, callback);\r\n      }, 200);\r\n      return true;\r\n    }\r\n    callback();\r\n  }\r\n\r\n  function clearPlaceholder(target, callback) {\r\n    const placeholder = target.textContent;\r\n    target.classList.add('disappear');\r\n    if (placeholder.length > 0) {\r\n      setTimeout(function () {\r\n        target.textContent = '';\r\n        clearPlaceholder(target, callback);\r\n      }, 1000);\r\n      return true;\r\n    }\r\n    callback();\r\n  }\r\n\r\n  function loopThroughSuggestions(target, index) {\r\n    if (focused) {\r\n      target.textContent = '';\r\n      return true;\r\n    }\r\n    fillPlaceholder(target, index, 0, function () {\r\n      setTimeout(function () {\r\n        clearPlaceholder(target, function () {\r\n          loopThroughSuggestions(target, (index + 1) % suggestions.length);\r\n        });\r\n      }, 2000);\r\n    });\r\n  }\r\n\r\n  const targetInput = document.getElementById('search-placeholder');\r\n  if (targetInput) loopThroughSuggestions(targetInput, 0);*/\r\n\r\n  return (\r\n    <div className=\"Search\">\r\n      <label>{t('Search your city, resources, etc')}</label>\r\n      <div className=\"line\"></div>\r\n\r\n      <div className=\"search-input-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchValue}\r\n          ref={searchInput}\r\n          onFocus={(event) => {\r\n            setExpand(true);\r\n          }}\r\n          onBlur={() => {\r\n            setExpand(false);\r\n          }}\r\n          onChange={(event) => {\r\n            setSearchValue(event.target.value);\r\n          }}\r\n        />\r\n        <span id=\"search-placeholder\" className=\"search-placeholder\"></span>\r\n\r\n        <div className={`search-button`}>\r\n          <Icon.Search />\r\n        </div>\r\n\r\n        {searchValue.length > 0 && (\r\n          <div\r\n            className={`close-button`}\r\n            onClick={() => {\r\n              setSearchValue('');\r\n              setResults([]);\r\n            }}\r\n          >\r\n            <Icon.X />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {results.length > 0 && (\r\n        <div className=\"results\">\r\n          {results.map((result, index) => {\r\n            if (result.type === 'state' || result.type === 'district') {\r\n              return (\r\n                <Link key={index} to={`state/${result.route}`}>\r\n                  <div className=\"result\">\r\n                    <div className=\"result-left\">\r\n                      <div className=\"result-name\">\r\n                        {`${result.name}`}\r\n                        {result.type === 'district' &&\r\n                          `, ${STATE_CODES[result.route]}`}\r\n                      </div>\r\n                      <div\r\n                        className={classnames('result-zone', {\r\n                          [`is-${districtZones[STATE_CODES[result.route]][\r\n                            result.name\r\n                          ]?.zone.toLowerCase()}`]: true,\r\n                        })}\r\n                      ></div>\r\n                    </div>\r\n                    <div className=\"result-type\">\r\n                      <span>{[result.route]}</span>\r\n                      <Icon.ArrowRightCircle size={14} />\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              );\r\n            } else {\r\n              return (\r\n                <a\r\n                  key={index}\r\n                  href={result.website}\r\n                  target=\"_noblank\"\r\n                  className=\"essential-result\"\r\n                >\r\n                  <div className=\"result-top\">\r\n                    <div className=\"result-top-left\">\r\n                      <div className=\"result-name\">{result.name}</div>\r\n                      <div className=\"result-location\">\r\n                        {result.city}, {result.state}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"result-category\">\r\n                      <div>\r\n                        {result.category.match('Delivery')\r\n                          ? 'Home Delivery'\r\n                          : result.category}\r\n                      </div>\r\n                      <Icon.ExternalLink />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"result-description\">{result.description}</div>\r\n                  <div className=\"result-contact\">\r\n                    <Icon.Phone />\r\n                    <div>{result.contact}</div>\r\n                  </div>\r\n                </a>\r\n              );\r\n            }\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {expand && (\r\n        <div className=\"expanded\">\r\n          <div className=\"expanded-left\">\r\n            <h3>{t('Essentials')}</h3>\r\n            <div className=\"suggestions\">\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Testing Pune');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Testing Pune')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Delhi Shelter');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Delhi Shelter')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(\r\n                      searchInput.current,\r\n                      'Community Kitchen in Kerala'\r\n                    );\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Community Kitchen in Kerala')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Groceries Chennai');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Groceries Chennai')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(\r\n                      searchInput.current,\r\n                      'Senior citizen support bangalore'\r\n                    );\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Senior citizen support bangalore')}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"expanded-right\">\r\n            <h3>{t('Locations')}</h3>\r\n            <div className=\"suggestions\">\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Hyderabad');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Hyderabad')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Karnataka');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Karnataka')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Chennai');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Chennai')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Jharkhand');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Jharkhand')}\r\n                </h4>\r\n              </div>\r\n              <div className=\"suggestion\">\r\n                <div>-</div>\r\n                <h4\r\n                  onMouseDown={(event) => {\r\n                    event.preventDefault();\r\n                    setNativeValue(searchInput.current, 'Alappuzha');\r\n                    searchInput.current.dispatchEvent(\r\n                      new Event('input', {bubbles: true})\r\n                    );\r\n                  }}\r\n                >\r\n                  {t('Alappuzha')}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Search);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronDown = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"6 9 12 15 18 9\"\n  }));\n});\nChevronDown.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronDown.displayName = 'ChevronDown';\nexport default ChevronDown;","/* eslint-disable */\nimport { useEffect, useState, useMemo } from 'react';\nvar createBreakpoint = function (breakpoints) {\n    if (breakpoints === void 0) { breakpoints = { laptopL: 1440, laptop: 1024, tablet: 768 }; }\n    return function () {\n        var _a = useState(0), screen = _a[0], setScreen = _a[1];\n        useEffect(function () {\n            var setSideScreen = function () {\n                setScreen(window.innerWidth);\n            };\n            setSideScreen();\n            window.addEventListener('resize', setSideScreen);\n            return function () {\n                window.removeEventListener('resize', setSideScreen);\n            };\n        });\n        var sortedBreakpoints = useMemo(function () { return Object.entries(breakpoints).sort(function (a, b) { return (a[1] >= b[1] ? 1 : -1); }); }, [\n            breakpoints,\n        ]);\n        var result = sortedBreakpoints.reduce(function (acc, _a) {\n            var name = _a[0], width = _a[1];\n            if (screen >= width) {\n                return name;\n            }\n            else {\n                return acc;\n            }\n        }, sortedBreakpoints[0][0]);\n        return result;\n    };\n};\nexport default createBreakpoint;\n","import {STATE_ROW_STATISTICS, DISTRICT_ROW_STATISTICS} from '../constants';\r\nimport {\r\n  formatDate,\r\n  formatNumber,\r\n  formatLastUpdated,\r\n  capitalize,\r\n  abbreviate,\r\n} from '../utils/commonfunctions';\r\n\r\nimport classnames from 'classnames';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState, useCallback, useMemo} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useHistory} from 'react-router-dom';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport {createBreakpoint, useLocalStorage, useEffectOnce} from 'react-use';\r\n\r\nconst useBreakpoint = createBreakpoint({XL: 1280, L: 768, S: 350});\r\n\r\nfunction StateCell({state, statistic}) {\r\n  const ArrowUp = useMemo(() => <Icon.ArrowUp />, []);\r\n\r\n  return (\r\n    <td>\r\n      <span className={classnames('delta', `is-${statistic}`)}>\r\n        {state[`delta${statistic}`] > 0 && ArrowUp}\r\n        {state[`delta${statistic}`] > 0 && state[`delta${statistic}`]}\r\n      </span>\r\n      <span className=\"total\">\r\n        {state[statistic] === 0 ? '-' : formatNumber(state[statistic])}\r\n      </span>\r\n    </td>\r\n  );\r\n}\r\n\r\nfunction DistrictHeaderCell({handleSort, statistic, sortData}) {\r\n  const breakpoint = useBreakpoint();\r\n  const {t} = useTranslation();\r\n\r\n  return (\r\n    <td onClick={() => handleSort(statistic)}>\r\n      <div className=\"heading-content\">\r\n        <abbr\r\n          className={classnames({[`is-${statistic}`]: breakpoint === 'S'})}\r\n          title={statistic}\r\n        >\r\n          {breakpoint === 'L'\r\n            ? statistic.slice(0)\r\n            : breakpoint === 'S'\r\n            ? capitalize(\r\n                abbreviate(statistic === 'deaths' ? 'deceased' : statistic)\r\n              )\r\n            : t(capitalize(statistic === 'deaths' ? 'deceased' : statistic))}\r\n        </abbr>\r\n        <div\r\n          style={{\r\n            display: sortData.sortColumn === statistic ? 'initial' : 'none',\r\n          }}\r\n        >\r\n          {sortData.isAscending ? (\r\n            <div className=\"arrow-up\" />\r\n          ) : (\r\n            <div className=\"arrow-down\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </td>\r\n  );\r\n}\r\n\r\nfunction PureDistrictCell({district, statistic}) {\r\n  return (\r\n    <td>\r\n      <span className={classnames('delta', `is-${statistic}`)}>\r\n        {district.delta[statistic] > 0 && <Icon.ArrowUp />}\r\n        {district.delta[statistic] > 0 && district.delta[statistic]}\r\n      </span>\r\n      <span className=\"total\">{formatNumber(district[statistic])}</span>\r\n    </td>\r\n  );\r\n}\r\n\r\nconst DistrictCell = React.memo(PureDistrictCell);\r\n\r\nconst isDistrictRowEqual = (prevProps, currProps) => {\r\n  if (equal(prevProps.regionHighlighted?.district, prevProps.district)) {\r\n    return false;\r\n  }\r\n  if (equal(currProps.regionHighlighted?.district, currProps.district)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction PureDistrictRow({\r\n  regionHighlighted,\r\n  district,\r\n  state,\r\n  zone,\r\n  onHighlightDistrict,\r\n  sortedDistricts,\r\n  districts,\r\n}) {\r\n  const {t} = useTranslation();\r\n\r\n  return (\r\n    <tr\r\n      key={district.district}\r\n      className={classnames('district', {\r\n        'is-highlighted': regionHighlighted?.district === district,\r\n      })}\r\n      onMouseEnter={() => onHighlightDistrict(district, state)}\r\n    >\r\n      <td className={classnames(`is-${zone?.zone}`)}>\r\n        <div className=\"title-chevron\">\r\n          <span className=\"title-icon\">\r\n            {t(district)}\r\n            <span\r\n              data-for=\"district\"\r\n              data-tip={[[sortedDistricts[district].notes]]}\r\n              data-event=\"touchstart mouseover\"\r\n              data-event-off=\"mouseleave\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              {sortedDistricts[district].notes && <Icon.Info />}\r\n            </span>\r\n          </span>\r\n        </div>\r\n      </td>\r\n\r\n      {DISTRICT_ROW_STATISTICS.map((statistic) => (\r\n        <DistrictCell\r\n          key={statistic}\r\n          district={districts[district]}\r\n          statistic={statistic}\r\n        />\r\n      ))}\r\n    </tr>\r\n  );\r\n}\r\n\r\nconst DistrictRow = React.memo(PureDistrictRow, isDistrictRowEqual);\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.state.state, currProps.state.state)) {\r\n    return false;\r\n  }\r\n  if (\r\n    !equal(\r\n      prevProps.regionHighlighted?.state,\r\n      currProps.regionHighlighted?.state\r\n    )\r\n  ) {\r\n    return false;\r\n  }\r\n  if (\r\n    !equal(\r\n      prevProps.regionHighlighted?.district,\r\n      currProps.regionHighlighted?.district\r\n    )\r\n  ) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction Row({\r\n  index,\r\n  state,\r\n  districts,\r\n  zones,\r\n  regionHighlighted,\r\n  onHighlightState,\r\n  onHighlightDistrict,\r\n}) {\r\n  const [sortedDistricts, setSortedDistricts] = useState(districts);\r\n  const [showDistricts, setShowDistricts] = useState(false);\r\n  const [sortData, setSortData] = useLocalStorage('districtSortData', {\r\n    sortColumn: 'confirmed',\r\n    isAscending: false,\r\n  });\r\n\r\n  const history = useHistory();\r\n  const {t} = useTranslation();\r\n\r\n  const Chevron = useMemo(\r\n    () => (\r\n      <span\r\n        className={classnames(\r\n          'dropdown',\r\n          {rotateRightDown: showDistricts},\r\n          {rotateDownRight: !showDistricts}\r\n        )}\r\n      >\r\n        <Icon.ChevronDown />\r\n      </span>\r\n    ),\r\n    [showDistricts]\r\n  );\r\n\r\n  const _onHighlightState = useCallback(\r\n    (state) => {\r\n      if (!equal(state.state, regionHighlighted?.state)) {\r\n        onHighlightState(state);\r\n      }\r\n    },\r\n    [onHighlightState, regionHighlighted]\r\n  );\r\n\r\n  const doSort = useCallback(\r\n    (sortData) => {\r\n      const sorted = {};\r\n      Object.keys(sortedDistricts)\r\n        .sort((district1, district2) => {\r\n          if (sortData.sortColumn !== 'district') {\r\n            return sortData.isAscending\r\n              ? parseInt(sortedDistricts[district1][sortData.sortColumn]) -\r\n                  parseInt(sortedDistricts[district2][sortData.sortColumn])\r\n              : parseInt(sortedDistricts[district2][sortData.sortColumn]) -\r\n                  parseInt(sortedDistricts[district1][sortData.sortColumn]);\r\n          } else {\r\n            return sortData.isAscending\r\n              ? district1.localeCompare(district2)\r\n              : district2.localeCompare(district1);\r\n          }\r\n        })\r\n        .forEach((key) => {\r\n          sorted[key] = sortedDistricts[key];\r\n        });\r\n      setSortedDistricts(sorted);\r\n    },\r\n    [sortedDistricts]\r\n  );\r\n\r\n  const handleSort = useCallback(\r\n    (statistic) => {\r\n      const newSortData = {\r\n        isAscending: !sortData.isAscending,\r\n        sortColumn: statistic,\r\n      };\r\n      doSort(newSortData);\r\n      setSortData(Object.assign({}, sortData, newSortData));\r\n    },\r\n    [doSort, setSortData, sortData]\r\n  );\r\n\r\n  useEffectOnce(() => {\r\n    if (state.statecode !== 'TT') doSort(sortData);\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <tr\r\n        className={classnames(\r\n          'state',\r\n          {'is-total': state.statecode === 'TT'},\r\n          {'is-highlighted': regionHighlighted?.state === state.state},\r\n          {'is-odd': index % 2 === 0}\r\n        )}\r\n        onMouseEnter={() => _onHighlightState(state)}\r\n        onClick={\r\n          state.statecode !== 'TT'\r\n            ? () => {\r\n                setShowDistricts(!showDistricts);\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <td>\r\n          <div className=\"title-chevron\">\r\n            {state.statecode !== 'TT' && Chevron}\r\n            <span className=\"title-icon\">\r\n              {t(state.state)}\r\n\r\n              <span\r\n                data-tip={[state.statenotes]}\r\n                data-event=\"touchstart mouseover\"\r\n                data-event-off=\"mouseleave\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {state.statenotes && <Icon.Info />}\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </td>\r\n\r\n        {STATE_ROW_STATISTICS.map((statistic, index) => (\r\n          <StateCell key={index} state={state} statistic={statistic} />\r\n        ))}\r\n      </tr>\r\n\r\n      {showDistricts && (\r\n        <React.Fragment>\r\n          <tr className=\"is-spacer\">\r\n            <td colSpan={5}>\r\n              <p />\r\n            </td>\r\n          </tr>\r\n\r\n          <tr className={'state-last-update'}>\r\n            <td colSpan={3} style={{paddingBottom: 0}}>\r\n              <p className=\"spacer\"></p>\r\n              <p>\r\n                {isNaN(Date.parse(formatDate(state.lastupdatedtime)))\r\n                  ? ''\r\n                  : `${t('Last updated')} ${formatLastUpdated(\r\n                      state.lastupdatedtime\r\n                    )} ${t('ago')}`}\r\n              </p>\r\n              {sortedDistricts?.Unknown && (\r\n                <div className=\"disclaimer\">\r\n                  <Icon.AlertCircle />\r\n                  {t('District-wise numbers are under reconciliation')}\r\n                </div>\r\n              )}\r\n            </td>\r\n            <td\r\n              align=\"center\"\r\n              className=\"state-page-link\"\r\n              colSpan={2}\r\n              onClick={() => {\r\n                history.push(`state/${state.statecode}`);\r\n              }}\r\n            >\r\n              {t('See more details on {{state}}', {state: t(state.state)})}\r\n            </td>\r\n          </tr>\r\n\r\n          <tr className={classnames('district-heading')}>\r\n            <td onClick={() => handleSort('district')}>\r\n              <div className=\"heading-content\">\r\n                <abbr title=\"District\">{t('District')}</abbr>\r\n                <div\r\n                  style={{\r\n                    display:\r\n                      sortData.sortColumn === 'district' ? 'initial' : 'none',\r\n                  }}\r\n                >\r\n                  {sortData.isAscending ? (\r\n                    <div className=\"arrow-up\" />\r\n                  ) : (\r\n                    <div className=\"arrow-down\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </td>\r\n\r\n            {DISTRICT_ROW_STATISTICS.map((statistic, index) => (\r\n              <DistrictHeaderCell\r\n                key={index}\r\n                handleSort={handleSort}\r\n                statistic={statistic}\r\n                sortData={sortData}\r\n              />\r\n            ))}\r\n          </tr>\r\n        </React.Fragment>\r\n      )}\r\n\r\n      {showDistricts &&\r\n        Object.keys(sortedDistricts).map((district, index) => (\r\n          <DistrictRow\r\n            key={district}\r\n            state={state}\r\n            district={district}\r\n            districts={districts}\r\n            zone={zones[district]}\r\n            sortedDistricts={sortedDistricts}\r\n            regionHighlighted={regionHighlighted}\r\n            onHighlightDistrict={onHighlightDistrict}\r\n          />\r\n        ))}\r\n\r\n      {showDistricts && (\r\n        <tr className=\"is-spacer\">\r\n          <td colSpan={5}>\r\n            <p />\r\n            <ReactTooltip\r\n              id=\"district\"\r\n              place=\"right\"\r\n              type=\"dark\"\r\n              effect=\"solid\"\r\n              multiline={true}\r\n              scrollHide={true}\r\n              globalEventOff=\"click\"\r\n            />\r\n          </td>\r\n        </tr>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default React.memo(Row, isEqual);\r\n","import Row from './row';\r\n\r\nimport {STATE_ROW_STATISTICS} from '../constants';\r\nimport {capitalize, abbreviate} from '../utils/commonfunctions';\r\n\r\nimport classnames from 'classnames';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState, useMemo, useCallback} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link} from 'react-router-dom';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport {createBreakpoint, useLocalStorage, useEffectOnce} from 'react-use';\r\n\r\nconst useBreakpoint = createBreakpoint({XL: 1280, L: 768, S: 350});\r\n\r\nfunction StateHeaderCell({handleSort, sortData, statistic}) {\r\n  const breakpoint = useBreakpoint();\r\n  const {t} = useTranslation();\r\n\r\n  return (\r\n    <th onClick={() => handleSort(statistic)}>\r\n      <div className=\"heading-content\">\r\n        <abbr\r\n          className={classnames({[`is-${statistic}`]: breakpoint === 'S'})}\r\n          title={statistic}\r\n        >\r\n          {breakpoint === 'L'\r\n            ? statistic.slice(0)\r\n            : breakpoint === 'S'\r\n            ? capitalize(\r\n                abbreviate(statistic === 'deaths' ? 'deceased' : statistic)\r\n              )\r\n            : t(capitalize(statistic === 'deaths' ? 'deceased' : statistic))}\r\n        </abbr>\r\n        <div\r\n          style={{\r\n            display: sortData.sortColumn === statistic ? 'initial' : 'none',\r\n          }}\r\n        >\r\n          <div\r\n            className={classnames(\r\n              {'arrow-up': sortData.isAscending},\r\n              {'arrow-down': !sortData.isAscending}\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n    </th>\r\n  );\r\n}\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  return equal(prevProps.regionHighlighted, currProps.regionHighlighted);\r\n};\r\n\r\nfunction Table({\r\n  states,\r\n  districts,\r\n  zones,\r\n  regionHighlighted,\r\n  onHighlightState,\r\n  onHighlightDistrict,\r\n}) {\r\n  const [sortData, setSortData] = useLocalStorage('sortData', {\r\n    sortColumn: 'confirmed',\r\n    isAscending: false,\r\n  });\r\n\r\n  const {t} = useTranslation();\r\n\r\n  const [sortedStates, setSortedStates] = useState(\r\n    states.filter((state) => state.statecode !== 'TT')\r\n  );\r\n\r\n  const FineprintTop = useMemo(\r\n    () => (\r\n      <React.Fragment>\r\n        <h5\r\n          className=\"table-fineprint fadeInUp\"\r\n          style={{animationDelay: '1.5s'}}\r\n        >\r\n          {t('Compiled from State Govt. numbers')},{' '}\r\n          <Link to=\"/about\" style={{color: '#6c757d'}}>\r\n            {t('know more')}!\r\n          </Link>\r\n        </h5>\r\n        <h5\r\n          className=\"table-fineprint fadeInUp\"\r\n          style={{animationDelay: '1.5s'}}\r\n        >\r\n          {t('District zones as published by MoHFW')}\r\n          {', '}\r\n          <a\r\n            href=\"https://www.facebook.com/airnewsalerts/photos/a.262571017217636/1710062729135117/?type=3&theater\"\r\n            style={{color: '#6c757d'}}\r\n          >\r\n            {t('source')}\r\n          </a>\r\n        </h5>\r\n      </React.Fragment>\r\n    ),\r\n    [t]\r\n  );\r\n\r\n  const FineprintBottom = useMemo(\r\n    () => (\r\n      <h5 className=\"table-fineprint fadeInUp\" style={{animationDelay: '1s'}}>\r\n        {states.slice(1).filter((s) => s && s.confirmed > 0).length} States/UTS\r\n        Affected\r\n      </h5>\r\n    ),\r\n    [states]\r\n  );\r\n\r\n  const doSort = useCallback(\r\n    (sortData) => {\r\n      const newSortedStates = [...sortedStates].sort((x, y) => {\r\n        if (sortData.sortColumn !== 'state') {\r\n          return sortData.isAscending\r\n            ? parseInt(x[sortData.sortColumn]) -\r\n                parseInt(y[sortData.sortColumn])\r\n            : parseInt(y[sortData.sortColumn]) -\r\n                parseInt(x[sortData.sortColumn]);\r\n        } else {\r\n          return sortData.isAscending\r\n            ? x[sortData.sortColumn].localeCompare(y[sortData.sortColumn])\r\n            : y[sortData.sortColumn].localeCompare(x[sortData.sortColumn]);\r\n        }\r\n      });\r\n      setSortedStates(newSortedStates);\r\n    },\r\n    [sortedStates]\r\n  );\r\n\r\n  const handleSort = useCallback(\r\n    (statistic) => {\r\n      const newSortData = {\r\n        isAscending: !sortData.isAscending,\r\n        sortColumn: statistic,\r\n      };\r\n      doSort(newSortData);\r\n      setSortData(Object.assign({}, sortData, newSortData));\r\n    },\r\n    [doSort, setSortData, sortData]\r\n  );\r\n\r\n  useEffectOnce(() => {\r\n    doSort(sortData);\r\n  });\r\n\r\n  if (states.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <ReactTooltip\r\n          place=\"right\"\r\n          type=\"dark\"\r\n          effect=\"solid\"\r\n          multiline={true}\r\n          globalEventOff=\"click\"\r\n        />\r\n\r\n        {FineprintTop}\r\n\r\n        <table className=\"table fadeInUp\" style={{animationDelay: '1.8s'}}>\r\n          <thead>\r\n            <tr>\r\n              <th className=\"state-heading\" onClick={() => handleSort('state')}>\r\n                <div className=\"heading-content\">\r\n                  <abbr title=\"State\">{t('State/UT')}</abbr>\r\n                  <div\r\n                    style={{\r\n                      display:\r\n                        sortData.sortColumn === 'state' ? 'initial' : 'none',\r\n                    }}\r\n                  >\r\n                    <div\r\n                      className={classnames(\r\n                        {'arrow-up': sortData.isAscending},\r\n                        {'arrow-down': !sortData.isAscending}\r\n                      )}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </th>\r\n              {STATE_ROW_STATISTICS.map((statistic, index) => (\r\n                <StateHeaderCell\r\n                  key={index}\r\n                  handleSort={handleSort}\r\n                  sortData={sortData}\r\n                  statistic={statistic}\r\n                />\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n\r\n          {states && (\r\n            <tbody>\r\n              {sortedStates.map((state, index) => {\r\n                if (state.confirmed > 0 && state.statecode !== 'TT') {\r\n                  return (\r\n                    <Row\r\n                      key={state.statecode}\r\n                      state={state}\r\n                      districts={districts[state.state]?.districtData}\r\n                      zones={zones[state.state]}\r\n                      regionHighlighted={\r\n                        equal(regionHighlighted?.state, state.state)\r\n                          ? regionHighlighted\r\n                          : null\r\n                      }\r\n                      onHighlightState={onHighlightState}\r\n                      onHighlightDistrict={onHighlightDistrict}\r\n                    />\r\n                  );\r\n                }\r\n                return null;\r\n              })}\r\n            </tbody>\r\n          )}\r\n\r\n          {states && (\r\n            <tbody>\r\n              <Row\r\n                key={0}\r\n                state={states[0]}\r\n                onHighlightState={onHighlightState}\r\n              />\r\n            </tbody>\r\n          )}\r\n        </table>\r\n        {states && FineprintBottom}\r\n      </React.Fragment>\r\n    );\r\n  } else {\r\n    return <div style={{height: '50rem'}}></div>;\r\n  }\r\n}\r\n\r\nexport default React.memo(Table, isEqual);\r\n","import axios from 'axios';\r\nimport {formatDistance, format} from 'date-fns';\r\nimport React, {useState, useLayoutEffect} from 'react';\r\nimport {useEffectOnce} from 'react-use';\r\n\r\nconst newDate = new Date();\r\nlet currentDate = newDate;\r\n\r\nfunction Updates(props) {\r\n  const [updates, setUpdates] = useState([]);\r\n\r\n  useEffectOnce(() => {\r\n    axios\r\n      .get('https://api.covid19india.org/updatelog/log.json')\r\n      .then((response) => {\r\n        setUpdates(response.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  });\r\n\r\n  // reset the currentDate after rendering is complete\r\n  // in case the currentDate was changed during addHeader\r\n  useLayoutEffect(() => {\r\n    currentDate = newDate;\r\n  });\r\n\r\n  return (\r\n    <div className=\"updates\">\r\n      <div className=\"updates-header\">\r\n        <h2>{format(currentDate, 'd MMM')}</h2>\r\n      </div>\r\n\r\n      {updates\r\n        .slice(-5)\r\n        .reverse()\r\n        .map(function (activity, index) {\r\n          activity.update = activity.update.replace('\\n', '<br/>');\r\n          const activityDate = new Date(activity.timestamp * 1000);\r\n          const addHeader = () => {\r\n            currentDate = activityDate;\r\n\r\n            return (\r\n              <React.Fragment>\r\n                {index === 0 ? (\r\n                  <div className=\"update\">\r\n                    <h4>No updates yet!</h4>\r\n                  </div>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                <div className=\"updates-header\">\r\n                  <h2>{format(activityDate, 'd MMM')}</h2>\r\n                </div>\r\n              </React.Fragment>\r\n            );\r\n          };\r\n\r\n          return (\r\n            <React.Fragment key={index}>\r\n              {activityDate.getDate() !== currentDate.getDate()\r\n                ? addHeader()\r\n                : ' '}\r\n              <div key={index} className=\"update\">\r\n                <h5>\r\n                  {formatDistance(\r\n                    new Date(activity.timestamp * 1000),\r\n                    new Date()\r\n                  ) + ' ago'}\r\n                </h5>\r\n                <h4\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: activity.update,\r\n                  }}\r\n                ></h4>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Updates;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Bell = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.73 21a2 2 0 0 1-3.46 0\"\n  }));\n});\nBell.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nBell.displayName = 'Bell';\nexport default Bell;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar BellOff = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.73 21a2 2 0 0 1-3.46 0\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.63 13A17.89 17.89 0 0 1 18 8\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 8a6 6 0 0 0-9.33-5\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"1\",\n    y1: \"1\",\n    x2: \"23\",\n    y2: \"23\"\n  }));\n});\nBellOff.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nBellOff.displayName = 'BellOff';\nexport default BellOff;","import Footer from './footer';\r\nimport Level from './level';\r\nimport MapExplorer from './mapexplorer';\r\nimport Minigraph from './minigraph';\r\nimport Search from './search';\r\nimport Table from './table';\r\nimport TimeSeriesExplorer from './timeseriesexplorer';\r\nimport Updates from './updates';\r\n\r\nimport {STATE_CODES_REVERSE} from '../constants';\r\nimport {\r\n  formatDate,\r\n  formatDateAbsolute,\r\n  mergeTimeseries,\r\n  preprocessTimeseries,\r\n  parseStateTimeseries,\r\n  parseStateTestData,\r\n  parseStateTestTimeseries,\r\n  parseTotalTestTimeseries,\r\n  parseDistrictZones,\r\n} from '../utils/commonfunctions';\r\n\r\nimport axios from 'axios';\r\nimport React, {useState, useCallback, useMemo} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {Helmet} from 'react-helmet';\r\nimport {useEffectOnce, useLocalStorage} from 'react-use';\r\nfunction Home(props) {\r\n  const [states, setStates] = useState(null);\r\n  const [stateDistrictWiseData, setStateDistrictWiseData] = useState(null);\r\n  const [districtZones, setDistrictZones] = useState(null);\r\n  const [stateTestData, setStateTestData] = useState(null);\r\n  const [lastUpdated, setLastUpdated] = useState('');\r\n  const [timeseries, setTimeseries] = useState(null);\r\n  const [fetched, setFetched] = useState(false);\r\n  const [regionHighlighted, setRegionHighlighted] = useState({\r\n    state: 'Total',\r\n  });\r\n  const [showUpdates, setShowUpdates] = useState(false);\r\n  const [anchor, setAnchor] = useState(null);\r\n  const [mapOption, setMapOption] = useState('confirmed');\r\n\r\n  const [lastViewedLog, setLastViewedLog] = useLocalStorage(\r\n    'lastViewedLog',\r\n    null\r\n  );\r\n  const [newUpdate, setNewUpdate] = useLocalStorage('newUpdate', false);\r\n\r\n  const Bell = useMemo(\r\n    () => (\r\n      <Icon.Bell\r\n        onClick={() => {\r\n          setShowUpdates(!showUpdates);\r\n          setNewUpdate(false);\r\n        }}\r\n      />\r\n    ),\r\n    [setNewUpdate, showUpdates]\r\n  );\r\n\r\n  const BellOff = useMemo(\r\n    () => (\r\n      <Icon.BellOff\r\n        onClick={() => {\r\n          setShowUpdates(!showUpdates);\r\n        }}\r\n      />\r\n    ),\r\n    [showUpdates]\r\n  );\r\n\r\n  useEffectOnce(() => {\r\n    getStates();\r\n  });\r\n\r\n  useEffectOnce(() => {\r\n    axios\r\n      .get('https://api.covid19india.org/updatelog/log.json')\r\n      .then((response) => {\r\n        const lastTimestamp = response.data\r\n          .slice()\r\n          .reverse()[0]\r\n          .timestamp.toString();\r\n        if (lastTimestamp !== lastViewedLog) {\r\n          setNewUpdate(true);\r\n          setLastViewedLog(lastTimestamp);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  });\r\n\r\n  const getStates = async () => {\r\n    try {\r\n      const [\r\n        {data: statesDailyResponse},\r\n        {data: zonesResponse},\r\n      ] = await Promise.all([\r\n        axios.get('https://api.covid19india.org/states_daily.json'),\r\n        axios.get('https://api.covid19india.org/zones.json'),\r\n      ]);\r\n\r\n      const [\r\n        {data},\r\n        {data: stateDistrictWiseResponse},\r\n        {data: stateTestData},\r\n      ] = await Promise.all([\r\n        axios.get('https://api.covid19india.org/data.json'),\r\n        axios.get('https://api.covid19india.org/state_district_wise.json'),\r\n        axios.get('https://api.covid19india.org/state_test_data.json'),\r\n      ]);\r\n\r\n      setStates(data.statewise);\r\n      setDistrictZones(parseDistrictZones(zonesResponse.zones));\r\n\r\n      const ts = parseStateTimeseries(statesDailyResponse);\r\n      ts['TT'] = preprocessTimeseries(data.cases_time_series);\r\n      // Testing data timeseries\r\n      const testTs = parseStateTestTimeseries(stateTestData.states_tested_data);\r\n      testTs['TT'] = parseTotalTestTimeseries(data.tested);\r\n      // Merge\r\n      const tsMerged = mergeTimeseries(ts, testTs);\r\n      setTimeseries(tsMerged);\r\n\r\n      setLastUpdated(data.statewise[0].lastupdatedtime);\r\n\r\n      const testData = parseStateTestData(stateTestData.states_tested_data);\r\n      const totalTest = data.tested[data.tested.length - 1];\r\n      testData['Total'] = {\r\n        source: totalTest.source,\r\n        totaltested: totalTest.totalsamplestested,\r\n        updatedon: totalTest.updatetimestamp.split(' ')[0],\r\n      };\r\n      setStateTestData(testData);\r\n\r\n      setStateDistrictWiseData(stateDistrictWiseResponse);\r\n      setFetched(true);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const onHighlightState = useCallback((state) => {\r\n    if (!state) return setRegionHighlighted(null);\r\n    setRegionHighlighted({state: state.state});\r\n  }, []);\r\n\r\n  const onHighlightDistrict = useCallback((district, state) => {\r\n    if (!state && !district) return setRegionHighlighted(null);\r\n    setRegionHighlighted({district, state: state.state});\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"Home\">\r\n        <Helmet>\r\n          <title>Coronavirus Outbreak in India - covid19india.org</title>\r\n          <meta\r\n            name=\"title\"\r\n            content=\"Coronavirus Outbreak in India: Latest Map and Case Count\"\r\n          />\r\n        </Helmet>\r\n\r\n        <div className=\"home-left\">\r\n          <div className=\"header fadeInUp\" style={{animationDelay: '1s'}}>\r\n            {fetched && <Search districtZones={districtZones} />}\r\n\r\n            <div className=\"actions\">\r\n              <h5>\r\n                {isNaN(Date.parse(formatDate(lastUpdated)))\r\n                  ? ''\r\n                  : `${formatDateAbsolute(lastUpdated)} IST`}\r\n              </h5>\r\n              {fetched && !showUpdates && (\r\n                <div className=\"bell-icon\">\r\n                  {fetched && Bell}\r\n                  {newUpdate && <div className=\"indicator\"></div>}\r\n                </div>\r\n              )}\r\n              {fetched && showUpdates && BellOff}\r\n            </div>\r\n          </div>\r\n\r\n          {showUpdates && <Updates />}\r\n\r\n          {states && <Level data={states[0]} />}\r\n          {timeseries && <Minigraph timeseries={timeseries['TT']} />}\r\n          {stateDistrictWiseData && (\r\n            <Table\r\n              states={states}\r\n              summary={false}\r\n              districts={stateDistrictWiseData}\r\n              zones={districtZones}\r\n              regionHighlighted={regionHighlighted}\r\n              setRegionHighlighted={setRegionHighlighted}\r\n              onHighlightState={onHighlightState}\r\n              onHighlightDistrict={onHighlightDistrict}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"home-right\">\r\n          <React.Fragment>\r\n            {fetched && (\r\n              <MapExplorer\r\n                mapName={'India'}\r\n                states={states}\r\n                districts={stateDistrictWiseData}\r\n                zones={districtZones}\r\n                stateTestData={stateTestData}\r\n                regionHighlighted={regionHighlighted}\r\n                setRegionHighlighted={setRegionHighlighted}\r\n                anchor={anchor}\r\n                setAnchor={setAnchor}\r\n                mapOption={mapOption}\r\n                setMapOption={setMapOption}\r\n              />\r\n            )}\r\n\r\n            {timeseries && (\r\n              <TimeSeriesExplorer\r\n                timeseries={\r\n                  timeseries[\r\n                    STATE_CODES_REVERSE[regionHighlighted?.state] || 'TT'\r\n                  ]\r\n                }\r\n                activeStateCode={\r\n                  STATE_CODES_REVERSE[regionHighlighted?.state] || 'TT'\r\n                }\r\n                onHighlightState={onHighlightState}\r\n                states={states}\r\n                anchor={anchor}\r\n                setAnchor={setAnchor}\r\n              />\r\n            )}\r\n          </React.Fragment>\r\n        </div>\r\n      </div>\r\n      {fetched && <Footer />}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}