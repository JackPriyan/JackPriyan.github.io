{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Jakith\\\\JackPriyan.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import*as d3 from'd3';import React,{useState,useEffect,useRef,useCallback}from'react';function Minigraph(_ref){var timeseries=_ref.timeseries;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),timeSeriesData=_useState2[0],setTimeSeriesData=_useState2[1];var svgRef1=useRef();var svgRef2=useRef();var svgRef3=useRef();var svgRef4=useRef();useEffect(function(){setTimeSeriesData(timeseries.slice(timeseries.length-20));},[timeseries]);var graphData=useCallback(function(data){if(data.length<=1)return 0;var margin={top:10,right:5,bottom:20,left:5};var chartRight=100-margin.right;var chartBottom=100-margin.bottom;var svg1=d3.select(svgRef1.current);var svg2=d3.select(svgRef2.current);var svg3=d3.select(svgRef3.current);var svg4=d3.select(svgRef4.current);data.forEach(function(d){d['dailyactive']=d.dailyconfirmed-d.dailyrecovered-d.dailydeceased;});var xScale=d3.scaleTime().domain(d3.extent(data,function(d){return d.date;})).range([margin.left,chartRight]);var svgArray=[svg1,svg2,svg3,svg4];var dataTypes=['dailyconfirmed','dailyactive','dailyrecovered','dailydeceased'];var colors=['#ff073a','#007bff','#28a745','#6c757d'];var dailyMin=d3.min(data,function(d){return d.dailyactive;});var dailyMax=d3.max(data,function(d){return Math.max(d.dailyconfirmed,d.dailyrecovered,d.dailydeceased);});var domainMinMax=Math.max(-dailyMin,dailyMax);var yScale=d3.scaleLinear().domain([-domainMinMax,domainMinMax]).range([chartBottom,margin.top]);svgArray.forEach(function(svg,i){var type=dataTypes[i];var color=colors[i];var path=svg.append('path').datum(data).attr('fill','none').attr('stroke',color+'99').attr('stroke-width',2.5).attr('cursor','pointer').attr('d',d3.line().x(function(d){return xScale(d.date);}).y(function(d){return yScale(d[type]);}).curve(d3.curveCardinal));var totalLength=path.node().getTotalLength();path.attr('stroke-dasharray',totalLength+' '+totalLength).attr('stroke-dashoffset',totalLength).transition().delay(500).duration(2500).attr('stroke-dashoffset',0);svg.selectAll('.dot').data(data.slice(data.length-1)).enter().append('circle').attr('fill',color).attr('stroke',color).attr('r',2).attr('cursor','pointer').attr('cx',function(d){return xScale(d.date);}).attr('cy',function(d){return yScale(d[type]);}).on('mouseover',function(d){d3.select(d3.event.target).attr('r','5');}).on('mouseout',function(d){d3.select(d3.event.target).attr('r','2');}).style('opacity',0).transition().delay(500).duration(2500).style('opacity',1);});},[]);useEffect(function(){graphData(timeSeriesData);},[timeSeriesData,graphData]);return/*#__PURE__*/React.createElement(\"div\",{className:\"Minigraph\"},/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent fadeInUp\",style:{animationDelay:'1.4s'}},/*#__PURE__*/React.createElement(\"svg\",{ref:svgRef1,width:\"100\",height:\"75\",viewBox:\"0 0 100 75\",preserveAspectRatio:\"xMidYMid meet\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent is-blue fadeInUp\",style:{animationDelay:'1.5s'}},/*#__PURE__*/React.createElement(\"svg\",{ref:svgRef2,width:\"100\",height:\"75\",viewBox:\"0 0 100 75\",preserveAspectRatio:\"xMidYMid meet\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent is-green fadeInUp\",style:{animationDelay:'1.6s'}},/*#__PURE__*/React.createElement(\"svg\",{ref:svgRef3,width:\"100\",height:\"75\",viewBox:\"0 0 100 75\",preserveAspectRatio:\"xMidYMid meet\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent is-gray fadeInUp\",style:{animationDelay:'1.7s'}},/*#__PURE__*/React.createElement(\"svg\",{ref:svgRef4,width:\"100\",height:\"75\",viewBox:\"0 0 100 75\",preserveAspectRatio:\"xMidYMid meet\"})));}export default React.memo(Minigraph);","map":{"version":3,"sources":["C:/Users/Jakith/JackPriyan.github.io/src/components/minigraph.js"],"names":["d3","React","useState","useEffect","useRef","useCallback","Minigraph","timeseries","timeSeriesData","setTimeSeriesData","svgRef1","svgRef2","svgRef3","svgRef4","slice","length","graphData","data","margin","top","right","bottom","left","chartRight","chartBottom","svg1","select","current","svg2","svg3","svg4","forEach","d","dailyconfirmed","dailyrecovered","dailydeceased","xScale","scaleTime","domain","extent","date","range","svgArray","dataTypes","colors","dailyMin","min","dailyactive","dailyMax","max","Math","domainMinMax","yScale","scaleLinear","svg","i","type","color","path","append","datum","attr","line","x","y","curve","curveCardinal","totalLength","node","getTotalLength","transition","delay","duration","selectAll","enter","on","event","target","style","animationDelay","memo"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\r\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\r\n\r\nfunction Minigraph({timeseries}) {\r\n  const [timeSeriesData, setTimeSeriesData] = useState([]);\r\n  const svgRef1 = useRef();\r\n  const svgRef2 = useRef();\r\n  const svgRef3 = useRef();\r\n  const svgRef4 = useRef();\r\n\r\n  useEffect(() => {\r\n    setTimeSeriesData(timeseries.slice(timeseries.length - 20));\r\n  }, [timeseries]);\r\n\r\n  const graphData = useCallback((data) => {\r\n    if (data.length <= 1) return 0;\r\n\r\n    const margin = {top: 10, right: 5, bottom: 20, left: 5};\r\n    const chartRight = 100 - margin.right;\r\n    const chartBottom = 100 - margin.bottom;\r\n\r\n    const svg1 = d3.select(svgRef1.current);\r\n    const svg2 = d3.select(svgRef2.current);\r\n    const svg3 = d3.select(svgRef3.current);\r\n    const svg4 = d3.select(svgRef4.current);\r\n\r\n    data.forEach((d) => {\r\n      d['dailyactive'] = d.dailyconfirmed - d.dailyrecovered - d.dailydeceased;\r\n    });\r\n\r\n    const xScale = d3\r\n      .scaleTime()\r\n      .domain(d3.extent(data, (d) => d.date))\r\n      .range([margin.left, chartRight]);\r\n\r\n    const svgArray = [svg1, svg2, svg3, svg4];\r\n    const dataTypes = [\r\n      'dailyconfirmed',\r\n      'dailyactive',\r\n      'dailyrecovered',\r\n      'dailydeceased',\r\n    ];\r\n    const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d'];\r\n\r\n    const dailyMin = d3.min(data, (d) => d.dailyactive);\r\n    const dailyMax = d3.max(data, (d) =>\r\n      Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\r\n    );\r\n    const domainMinMax = Math.max(-dailyMin, dailyMax);\r\n\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([-domainMinMax, domainMinMax])\r\n      .range([chartBottom, margin.top]);\r\n\r\n    svgArray.forEach((svg, i) => {\r\n      const type = dataTypes[i];\r\n      const color = colors[i];\r\n\r\n      const path = svg\r\n        .append('path')\r\n        .datum(data)\r\n        .attr('fill', 'none')\r\n        .attr('stroke', color + '99')\r\n        .attr('stroke-width', 2.5)\r\n        .attr('cursor', 'pointer')\r\n        .attr(\r\n          'd',\r\n          d3\r\n            .line()\r\n            .x((d) => xScale(d.date))\r\n            .y((d) => yScale(d[type]))\r\n            .curve(d3.curveCardinal)\r\n        );\r\n\r\n      const totalLength = path.node().getTotalLength();\r\n      path\r\n        .attr('stroke-dasharray', totalLength + ' ' + totalLength)\r\n        .attr('stroke-dashoffset', totalLength)\r\n        .transition()\r\n        .delay(500)\r\n        .duration(2500)\r\n        .attr('stroke-dashoffset', 0);\r\n\r\n      svg\r\n        .selectAll('.dot')\r\n        .data(data.slice(data.length - 1))\r\n        .enter()\r\n        .append('circle')\r\n        .attr('fill', color)\r\n        .attr('stroke', color)\r\n        .attr('r', 2)\r\n        .attr('cursor', 'pointer')\r\n        .attr('cx', (d) => xScale(d.date))\r\n        .attr('cy', (d) => yScale(d[type]))\r\n        .on('mouseover', (d) => {\r\n          d3.select(d3.event.target).attr('r', '5');\r\n        })\r\n        .on('mouseout', (d) => {\r\n          d3.select(d3.event.target).attr('r', '2');\r\n        })\r\n        .style('opacity', 0)\r\n        .transition()\r\n        .delay(500)\r\n        .duration(2500)\r\n        .style('opacity', 1);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    graphData(timeSeriesData);\r\n  }, [timeSeriesData, graphData]);\r\n\r\n  return (\r\n    <div className=\"Minigraph\">\r\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '1.4s'}}>\r\n        <svg\r\n          ref={svgRef1}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-blue fadeInUp\"\r\n        style={{animationDelay: '1.5s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef2}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-green fadeInUp\"\r\n        style={{animationDelay: '1.6s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef3}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-gray fadeInUp\"\r\n        style={{animationDelay: '1.7s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef4}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Minigraph);\r\n"]},"metadata":{},"sourceType":"module"}