{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Jakith\\\\JackPriyan.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Jakith\\\\JackPriyan.github.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import DownloadBlock from'./downloadblock';import Footer from'./footer';import Patients from'./patients';import{RAW_DATA_PARTITIONS}from'../constants';import axios from'axios';import{format,subDays,isWithinInterval,parse}from'date-fns';import React,{useState,useEffect,useCallback}from'react';import DatePicker from'react-date-picker';import*as Icon from'react-feather';import{Helmet}from'react-helmet';import{useLocation}from'react-router-dom';import{useLocalStorage}from'react-use';function filterByObject(obj,filters){var keys=Object.keys(filters);return obj.filter(function(p){return keys.every(function(key){if(!filters[key].length)return true;return p[key]===filters[key];});});}function Demographics(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),fetched=_useState2[0],setFetched=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),patients=_useState4[0],setPatients=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filteredPatients=_useState6[0],setFilteredPatients=_useState6[1];var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState7=useState('genders'),_useState8=_slicedToArray(_useState7,2),colorMode=_useState8[0],setColorMode=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),scaleMode=_useState10[0],setScaleMode=_useState10[1];var _useState11=useState(subDays(new Date(),1)),_useState12=_slicedToArray(_useState11,2),filterDate=_useState12[0],setFilterDate=_useState12[1];var _useLocalStorage=useLocalStorage('showReminder',true),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),showReminder=_useLocalStorage2[0],setShowReminder=_useLocalStorage2[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),message=_useState14[0],setMessage=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var _useState17=useState({detectedstate:'',detecteddistrict:'',detectedcity:'',dateannounced:format(subDays(new Date(),1),'dd/MM/yyyy')}),_useState18=_slicedToArray(_useState17,2),filters=_useState18[0],setFilters=_useState18[1];useEffect(function(){window.scrollTo(0,0);},[pathname]);var getPartition=useCallback(function(){var chosenDate=parse(filters.dateannounced,'dd/MM/yyyy',new Date());if(isWithinInterval(chosenDate,RAW_DATA_PARTITIONS.v1)){return 1;}else if(isWithinInterval(chosenDate,RAW_DATA_PARTITIONS.v2)){return 2;}else if(isWithinInterval(chosenDate,RAW_DATA_PARTITIONS.v3)){return 3;}else if(isWithinInterval(chosenDate,RAW_DATA_PARTITIONS.v4)){return 4;}},[filters.dateannounced]);useEffect(function(){try{axios.get(\"https://api.covid19india.org/raw_data\".concat(getPartition(),\".json\")).then(function(response){setPatients(response.data.raw_data.reverse());setFetched(true);});}catch(err){console.log(err);}},[filters.dateannounced,getPartition]);useEffect(function(){var datePickers=document.querySelectorAll('.react-date-picker__inputGroup input');datePickers.forEach(function(el){return el.setAttribute('readOnly',true);});},[]);var handleFilters=function handleFilters(label,value){setFilters(function(f){// Create new object (deep copy)\nvar newFilters=_objectSpread({},f);newFilters[label]=value;if(label==='detectedstate'){var district=document.getElementById('district');var city=document.getElementById('city');// Hide boxes\nif(value==='')district.style.display='none';else district.style.display='inline';city.style.display='none';// Default to empty selection\ndistrict.selectedIndex=0;city.selectedIndex=0;newFilters['detecteddistrict']='';newFilters['detectedcity']='';}else if(label==='detecteddistrict'){var _city=document.getElementById('city');// Hide box\nif(value==='')_city.style.display='none';else _city.style.display='inline';// Default to empty selection\n_city.selectedIndex=0;newFilters['detectedcity']='';}return newFilters;});};useEffect(function(){if(filterByObject(patients,filters).length>0){setFilteredPatients(filterByObject(patients,filters));setMessage(false);setLoading(false);}else{setMessage(true);}},[patients,filters]);function getSortedValues(obj,key){var setValues=new Set(obj.map(function(p){return p[key];}));if(setValues.size>1)setValues.add('');if(key==='dateannounced')return Array.from(setValues);return Array.from(setValues).sort();}return/*#__PURE__*/React.createElement(\"div\",{className:\"Demographics\"},/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,\"Demographics - covid19india.org\"),/*#__PURE__*/React.createElement(\"meta\",{name:\"title\",content:\"Demographics - covid19india.org\"}),/*#__PURE__*/React.createElement(\"meta\",{name:\"description\",content:\"A demographical overview of the Indian population affected by the coronavirus.\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"filters fadeInUp\",style:{animationDelay:'0.2s'}},/*#__PURE__*/React.createElement(\"div\",{className:\"filters-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"select\"},/*#__PURE__*/React.createElement(\"select\",{style:{animationDelay:'0.3s'},id:\"state\",onChange:function onChange(event){handleFilters('detectedstate',event.target.value);},defaultValue:filters.detectedstate},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select State\"),getSortedValues(patients,'detectedstate').map(function(state,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:state},state===''?'All':state);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"select\"},/*#__PURE__*/React.createElement(\"select\",{style:{animationDelay:'0.4s',display:'none'},id:\"district\",onChange:function onChange(event){handleFilters('detecteddistrict',event.target.value);},defaultValue:filters.detecteddistrict},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select District\"),getSortedValues(filterByObject(patients,{detectedstate:filters.detectedstate}),'detecteddistrict').map(function(district,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:district},district===''?'All':district);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"select\"},/*#__PURE__*/React.createElement(\"select\",{style:{animationDelay:'0.4s',display:'none'},id:\"city\",onChange:function onChange(event){handleFilters('detectedcity',event.target.value);},defaultValue:filters.detectedcity},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select City\"),getSortedValues(filterByObject(patients,{detectedstate:filters.detectedstate,detecteddistrict:filters.detecteddistrict}),'detectedcity').map(function(city,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:city},city===''?'All':city);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"select\"},/*#__PURE__*/React.createElement(\"select\",{style:{animationDelay:'0.4s',display:'none'},id:\"city\",onChange:function onChange(event){handleFilters('detectedcity',event.target.value);},defaultValue:filters.detectedcity},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true},\"Select City\"),getSortedValues(filterByObject(patients,{detectedstate:filters.detectedstate,detecteddistrict:filters.detecteddistrict}),'detectedcity').map(function(city,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:city},city===''?'All':city);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"select\"},/*#__PURE__*/React.createElement(DatePicker,{value:filterDate,minDate:new Date('30-Jan-2020'),maxDate:subDays(new Date(),1),format:\"dd/MM/y\",calendarIcon:/*#__PURE__*/React.createElement(Icon.Calendar,null),inputProps:onkeydown=function onkeydown(e){e.preventDefault();},clearIcon:/*#__PURE__*/React.createElement(Icon.XCircle,null),onChange:function onChange(date){setFilterDate(date);var fomattedDate=!!date?format(date,'dd/MM/yyyy'):'';handleFilters('dateannounced',fomattedDate);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"legend\"},colorMode==='genders'&&/*#__PURE__*/React.createElement(\"div\",{className:\"legend-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-female\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-female\"},\"Female\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-male\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-male\"},\"Male\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"\"},\"Unknown\")),colorMode==='transmission'&&/*#__PURE__*/React.createElement(\"div\",{className:\"legend-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-local\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-local\"},\"Local\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-imported\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-imported\"},\"Imported\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"\"},\"Unknown\")),colorMode==='nationality'&&/*#__PURE__*/React.createElement(\"div\",{className:\"legend-left nationality\"},/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-in\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-in\"},\"In\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-uk\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-uk\"},\"Uk\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-us\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-us\"},\"Us\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-th\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-thailand\"},\"Th\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-ph\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-ph\"},\"Ph\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-it\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-it\"},\"It\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-ca\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-ca\"},\"Ca\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-id\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-id\"},\"Id\"),/*#__PURE__*/React.createElement(\"div\",{className:\"circle is-mm\"}),/*#__PURE__*/React.createElement(\"h5\",{className:\"is-mm\"},\"Mm\")),/*#__PURE__*/React.createElement(\"div\",{className:\"select \".concat(colorMode)},/*#__PURE__*/React.createElement(\"select\",{style:{animationDelay:'0.4s'},onChange:function onChange(event){setColorMode(event.target.value);},defaultValue:colorMode},/*#__PURE__*/React.createElement(\"option\",{value:\"genders\"},\"Genders\"),/*#__PURE__*/React.createElement(\"option\",{value:\"transmission\"},\"Transmission\"),/*#__PURE__*/React.createElement(\"option\",{value:\"nationality\"},\"Nationality\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"header fadeInUp\",style:{animationDelay:'0.3s'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Demographics\"),/*#__PURE__*/React.createElement(\"div\",{className:\"deep-dive \".concat(message||filteredPatients.length===0?'disabled':'')},/*#__PURE__*/React.createElement(\"h5\",null,\"Expand\"),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",checked:scaleMode,disabled:message||filteredPatients.length===0,onChange:function onChange(event){setScaleMode(!scaleMode);},className:\"switch\"}))),/*#__PURE__*/React.createElement(\"h6\",{className:\"disclaimer\"},\"Some of the data provided might be missing/unknown as the details have not been shared by the state/central governments\")),/*#__PURE__*/React.createElement(\"div\",{className:\"reminder fadeInUp\",style:{animationDelay:'1s',display:showReminder?'':'none'}},/*#__PURE__*/React.createElement(Icon.XCircle,{onClick:function onClick(){setShowReminder(false);}}),/*#__PURE__*/React.createElement(\"p\",null,\"It is important that we do not think of these as just tiny boxes, numbers, or just another part of statistics - among these are our neighbors, our teachers, our healthcare workers, our supermarket vendors, our friends, our co-workers, our children or our grandparents.\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Among these are our people.\")),fetched&&/*#__PURE__*/React.createElement(\"div\",{className:\"patientdb-wrapper\"},loading?' ':message?/*#__PURE__*/React.createElement(\"div\",{className:\"no-result\"},/*#__PURE__*/React.createElement(\"h5\",null,\"There were no new cases in\",/*#__PURE__*/React.createElement(\"span\",null,filters.detectedcity.length>0?\" \".concat(filters.detectedcity,\", \"):'',filters.detecteddistrict.length>0?\" \".concat(filters.detecteddistrict,\", \"):'',' '+filters.detectedstate),' ',\"on \",/*#__PURE__*/React.createElement(\"span\",null,filters.dateannounced,\".\"))):/*#__PURE__*/React.createElement(Patients,{patients:filteredPatients,colorMode:colorMode,expand:scaleMode})),/*#__PURE__*/React.createElement(DownloadBlock,{patients:patients}),/*#__PURE__*/React.createElement(Footer,null));}export default Demographics;","map":{"version":3,"sources":["C:/Users/Jakith/JackPriyan.github.io/src/components/demographics.js"],"names":["DownloadBlock","Footer","Patients","RAW_DATA_PARTITIONS","axios","format","subDays","isWithinInterval","parse","React","useState","useEffect","useCallback","DatePicker","Icon","Helmet","useLocation","useLocalStorage","filterByObject","obj","filters","keys","Object","filter","p","every","key","length","Demographics","props","fetched","setFetched","patients","setPatients","filteredPatients","setFilteredPatients","pathname","colorMode","setColorMode","scaleMode","setScaleMode","Date","filterDate","setFilterDate","showReminder","setShowReminder","message","setMessage","loading","setLoading","detectedstate","detecteddistrict","detectedcity","dateannounced","setFilters","window","scrollTo","getPartition","chosenDate","v1","v2","v3","v4","get","then","response","data","raw_data","reverse","err","console","log","datePickers","document","querySelectorAll","forEach","el","setAttribute","handleFilters","label","value","f","newFilters","district","getElementById","city","style","display","selectedIndex","getSortedValues","setValues","Set","map","size","add","Array","from","sort","animationDelay","event","target","state","index","onkeydown","e","preventDefault","date","fomattedDate"],"mappings":"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","sourcesContent":["import DownloadBlock from './downloadblock';\r\nimport Footer from './footer';\r\nimport Patients from './patients';\r\n\r\nimport {RAW_DATA_PARTITIONS} from '../constants';\r\n\r\nimport axios from 'axios';\r\nimport {format, subDays, isWithinInterval, parse} from 'date-fns';\r\nimport React, {useState, useEffect, useCallback} from 'react';\r\nimport DatePicker from 'react-date-picker';\r\nimport * as Icon from 'react-feather';\r\nimport {Helmet} from 'react-helmet';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {useLocalStorage} from 'react-use';\r\n\r\nfunction filterByObject(obj, filters) {\r\n  const keys = Object.keys(filters);\r\n  return obj.filter((p) => {\r\n    return keys.every((key) => {\r\n      if (!filters[key].length) return true;\r\n      return p[key] === filters[key];\r\n    });\r\n  });\r\n}\r\n\r\nfunction Demographics(props) {\r\n  const [fetched, setFetched] = useState(false);\r\n  const [patients, setPatients] = useState([]);\r\n  const [filteredPatients, setFilteredPatients] = useState([]);\r\n  const {pathname} = useLocation();\r\n  const [colorMode, setColorMode] = useState('genders');\r\n  const [scaleMode, setScaleMode] = useState(false);\r\n  const [filterDate, setFilterDate] = useState(subDays(new Date(), 1));\r\n  const [showReminder, setShowReminder] = useLocalStorage('showReminder', true);\r\n  const [message, setMessage] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    detectedstate: '',\r\n    detecteddistrict: '',\r\n    detectedcity: '',\r\n    dateannounced: format(subDays(new Date(), 1), 'dd/MM/yyyy'),\r\n  });\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  const getPartition = useCallback(() => {\r\n    const chosenDate = parse(filters.dateannounced, 'dd/MM/yyyy', new Date());\r\n    if (isWithinInterval(chosenDate, RAW_DATA_PARTITIONS.v1)) {\r\n      return 1;\r\n    } else if (isWithinInterval(chosenDate, RAW_DATA_PARTITIONS.v2)) {\r\n      return 2;\r\n    } else if (isWithinInterval(chosenDate, RAW_DATA_PARTITIONS.v3)) {\r\n      return 3;\r\n    } else if (isWithinInterval(chosenDate, RAW_DATA_PARTITIONS.v4)) {\r\n      return 4;\r\n    }\r\n  }, [filters.dateannounced]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      axios\r\n        .get(`https://api.covid19india.org/raw_data${getPartition()}.json`)\r\n        .then((response) => {\r\n          setPatients(response.data.raw_data.reverse());\r\n          setFetched(true);\r\n        });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }, [filters.dateannounced, getPartition]);\r\n\r\n  useEffect(() => {\r\n    const datePickers = document.querySelectorAll(\r\n      '.react-date-picker__inputGroup input'\r\n    );\r\n    datePickers.forEach((el) => el.setAttribute('readOnly', true));\r\n  }, []);\r\n\r\n  const handleFilters = (label, value) => {\r\n    setFilters((f) => {\r\n      // Create new object (deep copy)\r\n      const newFilters = {...f};\r\n      newFilters[label] = value;\r\n      if (label === 'detectedstate') {\r\n        const district = document.getElementById('district');\r\n        const city = document.getElementById('city');\r\n        // Hide boxes\r\n        if (value === '') district.style.display = 'none';\r\n        else district.style.display = 'inline';\r\n        city.style.display = 'none';\r\n        // Default to empty selection\r\n        district.selectedIndex = 0;\r\n        city.selectedIndex = 0;\r\n        newFilters['detecteddistrict'] = '';\r\n        newFilters['detectedcity'] = '';\r\n      } else if (label === 'detecteddistrict') {\r\n        const city = document.getElementById('city');\r\n        // Hide box\r\n        if (value === '') city.style.display = 'none';\r\n        else city.style.display = 'inline';\r\n        // Default to empty selection\r\n        city.selectedIndex = 0;\r\n        newFilters['detectedcity'] = '';\r\n      }\r\n      return newFilters;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (filterByObject(patients, filters).length > 0) {\r\n      setFilteredPatients(filterByObject(patients, filters));\r\n      setMessage(false);\r\n      setLoading(false);\r\n    } else {\r\n      setMessage(true);\r\n    }\r\n  }, [patients, filters]);\r\n\r\n  function getSortedValues(obj, key) {\r\n    const setValues = new Set(obj.map((p) => p[key]));\r\n    if (setValues.size > 1) setValues.add('');\r\n    if (key === 'dateannounced') return Array.from(setValues);\r\n    return Array.from(setValues).sort();\r\n  }\r\n\r\n  return (\r\n    <div className=\"Demographics\">\r\n      <Helmet>\r\n        <title>Demographics - covid19india.org</title>\r\n        <meta name=\"title\" content={`Demographics - covid19india.org`} />\r\n        <meta\r\n          name=\"description\"\r\n          content=\"A demographical overview of the Indian population affected by the coronavirus.\"\r\n        />\r\n      </Helmet>\r\n\r\n      <div className=\"filters fadeInUp\" style={{animationDelay: '0.2s'}}>\r\n        <div className=\"filters-left\">\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.3s'}}\r\n              id=\"state\"\r\n              onChange={(event) => {\r\n                handleFilters('detectedstate', event.target.value);\r\n              }}\r\n              defaultValue={filters.detectedstate}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select State\r\n              </option>\r\n              {getSortedValues(patients, 'detectedstate').map(\r\n                (state, index) => {\r\n                  return (\r\n                    <option key={index} value={state}>\r\n                      {state === '' ? 'All' : state}\r\n                    </option>\r\n                  );\r\n                }\r\n              )}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s', display: 'none'}}\r\n              id=\"district\"\r\n              onChange={(event) => {\r\n                handleFilters('detecteddistrict', event.target.value);\r\n              }}\r\n              defaultValue={filters.detecteddistrict}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select District\r\n              </option>\r\n              {getSortedValues(\r\n                filterByObject(patients, {\r\n                  detectedstate: filters.detectedstate,\r\n                }),\r\n                'detecteddistrict'\r\n              ).map((district, index) => {\r\n                return (\r\n                  <option key={index} value={district}>\r\n                    {district === '' ? 'All' : district}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s', display: 'none'}}\r\n              id=\"city\"\r\n              onChange={(event) => {\r\n                handleFilters('detectedcity', event.target.value);\r\n              }}\r\n              defaultValue={filters.detectedcity}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select City\r\n              </option>\r\n              {getSortedValues(\r\n                filterByObject(patients, {\r\n                  detectedstate: filters.detectedstate,\r\n                  detecteddistrict: filters.detecteddistrict,\r\n                }),\r\n                'detectedcity'\r\n              ).map((city, index) => {\r\n                return (\r\n                  <option key={index} value={city}>\r\n                    {city === '' ? 'All' : city}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s', display: 'none'}}\r\n              id=\"city\"\r\n              onChange={(event) => {\r\n                handleFilters('detectedcity', event.target.value);\r\n              }}\r\n              defaultValue={filters.detectedcity}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select City\r\n              </option>\r\n              {getSortedValues(\r\n                filterByObject(patients, {\r\n                  detectedstate: filters.detectedstate,\r\n                  detecteddistrict: filters.detecteddistrict,\r\n                }),\r\n                'detectedcity'\r\n              ).map((city, index) => {\r\n                return (\r\n                  <option key={index} value={city}>\r\n                    {city === '' ? 'All' : city}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <DatePicker\r\n              value={filterDate}\r\n              minDate={new Date('30-Jan-2020')}\r\n              maxDate={subDays(new Date(), 1)}\r\n              format=\"dd/MM/y\"\r\n              calendarIcon={<Icon.Calendar />}\r\n              inputProps={\r\n                (onkeydown = (e) => {\r\n                  e.preventDefault();\r\n                })\r\n              }\r\n              clearIcon={<Icon.XCircle />}\r\n              onChange={(date) => {\r\n                setFilterDate(date);\r\n                const fomattedDate = !!date ? format(date, 'dd/MM/yyyy') : '';\r\n                handleFilters('dateannounced', fomattedDate);\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s'}}\r\n              onChange={(event) => {\r\n                handleFilters('dateannounced', event.target.value);\r\n              }}\r\n            >\r\n              {Array.from(new Set(patients.map((p) => p.dateannounced))).map(\r\n                (date, index) => {\r\n                  return (\r\n                    <option key={index} value={date}>\r\n                      {date}\r\n                    </option>\r\n                  );\r\n                }\r\n              )}\r\n            </select>\r\n          </div>*/}\r\n        </div>\r\n\r\n        <div className=\"legend\">\r\n          {colorMode === 'genders' && (\r\n            <div className=\"legend-left\">\r\n              <div className=\"circle is-female\"></div>\r\n              <h5 className=\"is-female\">Female</h5>\r\n              <div className=\"circle is-male\"></div>\r\n              <h5 className=\"is-male\">Male</h5>\r\n              <div className=\"circle\"></div>\r\n              <h5 className=\"\">Unknown</h5>\r\n            </div>\r\n          )}\r\n\r\n          {colorMode === 'transmission' && (\r\n            <div className=\"legend-left\">\r\n              <div className=\"circle is-local\"></div>\r\n              <h5 className=\"is-local\">Local</h5>\r\n              <div className=\"circle is-imported\"></div>\r\n              <h5 className=\"is-imported\">Imported</h5>\r\n              <div className=\"circle\"></div>\r\n              <h5 className=\"\">Unknown</h5>\r\n            </div>\r\n          )}\r\n\r\n          {colorMode === 'nationality' && (\r\n            <div className=\"legend-left nationality\">\r\n              <div className=\"circle is-in\"></div>\r\n              <h5 className=\"is-in\">In</h5>\r\n              <div className=\"circle is-uk\"></div>\r\n              <h5 className=\"is-uk\">Uk</h5>\r\n              <div className=\"circle is-us\"></div>\r\n              <h5 className=\"is-us\">Us</h5>\r\n              <div className=\"circle is-th\"></div>\r\n              <h5 className=\"is-thailand\">Th</h5>\r\n              <div className=\"circle is-ph\"></div>\r\n              <h5 className=\"is-ph\">Ph</h5>\r\n              <div className=\"circle is-it\"></div>\r\n              <h5 className=\"is-it\">It</h5>\r\n              <div className=\"circle is-ca\"></div>\r\n              <h5 className=\"is-ca\">Ca</h5>\r\n              <div className=\"circle is-id\"></div>\r\n              <h5 className=\"is-id\">Id</h5>\r\n              <div className=\"circle is-mm\"></div>\r\n              <h5 className=\"is-mm\">Mm</h5>\r\n            </div>\r\n          )}\r\n\r\n          <div className={`select ${colorMode}`}>\r\n            <select\r\n              style={{animationDelay: '0.4s'}}\r\n              onChange={(event) => {\r\n                setColorMode(event.target.value);\r\n              }}\r\n              defaultValue={colorMode}\r\n            >\r\n              {/* <option value=\"\" disabled>\r\n                Color modes\r\n              </option> */}\r\n              <option value=\"genders\">Genders</option>\r\n              <option value=\"transmission\">Transmission</option>\r\n              <option value=\"nationality\">Nationality</option>\r\n              {/* <option value=\"age\">Age</option>*/}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"header fadeInUp\" style={{animationDelay: '0.3s'}}>\r\n        <div>\r\n          <h1>Demographics</h1>\r\n\r\n          <div\r\n            className={`deep-dive ${\r\n              message || filteredPatients.length === 0 ? 'disabled' : ''\r\n            }`}\r\n          >\r\n            <h5>Expand</h5>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={scaleMode}\r\n              disabled={message || filteredPatients.length === 0}\r\n              onChange={(event) => {\r\n                setScaleMode(!scaleMode);\r\n              }}\r\n              className=\"switch\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <h6 className=\"disclaimer\">\r\n          Some of the data provided might be missing/unknown as the details have\r\n          not been shared by the state/central governments\r\n        </h6>\r\n      </div>\r\n\r\n      <div\r\n        className=\"reminder fadeInUp\"\r\n        style={{animationDelay: '1s', display: showReminder ? '' : 'none'}}\r\n      >\r\n        <Icon.XCircle\r\n          onClick={() => {\r\n            setShowReminder(false);\r\n          }}\r\n        />\r\n        <p>\r\n          It is important that we do not think of these as just tiny boxes,\r\n          numbers, or just another part of statistics - among these are our\r\n          neighbors, our teachers, our healthcare workers, our supermarket\r\n          vendors, our friends, our co-workers, our children or our\r\n          grandparents.\r\n          <br />\r\n          <br />\r\n          Among these are our people.\r\n        </p>\r\n      </div>\r\n\r\n      {fetched && (\r\n        <div className=\"patientdb-wrapper\">\r\n          {loading ? (\r\n            ' '\r\n          ) : message ? (\r\n            <div className=\"no-result\">\r\n              <h5>\r\n                There were no new cases in\r\n                <span>\r\n                  {filters.detectedcity.length > 0\r\n                    ? ` ${filters.detectedcity}, `\r\n                    : ''}\r\n                  {filters.detecteddistrict.length > 0\r\n                    ? ` ${filters.detecteddistrict}, `\r\n                    : ''}\r\n                  {' ' + filters.detectedstate}\r\n                </span>{' '}\r\n                on <span>{filters.dateannounced}.</span>\r\n              </h5>\r\n            </div>\r\n          ) : (\r\n            <Patients\r\n              patients={filteredPatients}\r\n              colorMode={colorMode}\r\n              expand={scaleMode}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <DownloadBlock patients={patients} />\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Demographics;\r\n"]},"metadata":{},"sourceType":"module"}